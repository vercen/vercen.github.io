[{"data":1,"prerenderedAt":1460},["ShallowReactive",2],{"/2024/blog-link-pattern":3,"surround-/2024/blog-link-pattern":1450},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"updated":11,"categories":12,"tags":14,"references":17,"readingTime":24,"body":29,"_type":1444,"_id":1445,"_source":1446,"_file":1447,"_stem":1448,"_extension":156,"_original_dir":1449},"/2024/blog-link-pattern","2024",false,"","把博客文章按年份放在子文件夹中了","同时更改了文章链接前缀，编写了跳转脚本，后来通过平台重定向规则实现更规范的跳转。","2024-04-29T03:10:18.000Z","2024-09-27T00:37:52.000Z",[13],"经验分享",[15,16],"网站","博客",[18,21],{"title":19,"link":20},"使用子文件夹管理 Hexo 文章且不改变文章永久链接","https://prinsss.github.io/hexo-posts-in-subfolder/",{"title":22,"link":23},"更改Hugo博客的永久URL链接，并用Netlify实现旧博文跳转","https://thirdshire.com/simplify-permalinks/",{"text":25,"minutes":26,"time":27,"words":28},"4 min read",3.845,230700,769,{"type":30,"children":31,"toc":1436},"root",[32,49,56,93,98,207,675,680,716,721,726,780,850,855,1070,1075,1080,1091,1106,1127,1244,1273,1304,1309,1349,1361,1370,1383,1415,1420,1425,1430],{"type":33,"tag":34,"props":35,"children":36},"element","blockquote",{},[37,44],{"type":33,"tag":38,"props":39,"children":40},"p",{},[41],{"type":42,"value":43},"text","我的博客很少写关于折腾博客的内容，因为我不想让博客变成博客的博客。这次的行为仅服务于博客的后期维护。",{"type":33,"tag":38,"props":45,"children":46},{},[47],{"type":42,"value":48},"私以为，博客应当专注于内容，而不是囿于形式。",{"type":33,"tag":50,"props":51,"children":53},"h2",{"id":52},"posts-目录文章过多",[54],{"type":42,"value":55},"posts 目录文章过多",{"type":33,"tag":38,"props":57,"children":58},{},[59,61,68,70,76,78,84,86,91],{"type":42,"value":60},"不知不觉，博客已经有了大约 45 篇文章，生成的文章链接以 ",{"type":33,"tag":62,"props":63,"children":65},"code",{"className":64},[],[66],{"type":42,"value":67},":year:month/",{"type":42,"value":69}," (如 ",{"type":33,"tag":62,"props":71,"children":73},{"className":72},[],[74],{"type":42,"value":75},"202404/",{"type":42,"value":77},") 开头，但 Markdown 源文件都放在了 ",{"type":33,"tag":62,"props":79,"children":81},{"className":80},[],[82],{"type":42,"value":83},"_posts/",{"type":42,"value":85}," 目录下，不便于管理。因此，我想在",{"type":33,"tag":62,"props":87,"children":89},{"className":88},[],[90],{"type":42,"value":83},{"type":42,"value":92}," 目录里按年份创建子文件夹。",{"type":33,"tag":50,"props":94,"children":96},{"id":95},"移动文章到年份文件夹",[97],{"type":42,"value":95},{"type":33,"tag":38,"props":99,"children":100},{},[101,103,110,112,205],{"type":42,"value":102},"看了 ",{"type":33,"tag":104,"props":105,"children":107},"a",{"href":106},"#references",[108],{"type":42,"value":109},"参考资料",{"type":42,"value":111},"，博主给出了一个实用命令 ",{"type":33,"tag":62,"props":113,"children":116},{"className":114,"language":115,"style":7},"language-cmd shiki shiki-themes catppuccin-latte one-dark-pro","cmd",[117,124,130,135,141,146,152,157,161,166,171,176,180,185,189,194,200],{"type":33,"tag":118,"props":119,"children":121},"span",{"style":120},"--shiki-default:#4C4F69;--shiki-dark:#E06C75",[122],{"type":42,"value":123},"grep",{"type":33,"tag":118,"props":125,"children":127},{"style":126},"--shiki-default:#179299;--shiki-dark:#ABB2BF",[128],{"type":42,"value":129}," -",{"type":33,"tag":118,"props":131,"children":132},{"style":120},[133],{"type":42,"value":134},"r",{"type":33,"tag":118,"props":136,"children":138},{"style":137},"--shiki-default:#40A02B;--shiki-dark:#98C379",[139],{"type":42,"value":140}," \"date: '2015-\"",{"type":33,"tag":118,"props":142,"children":143},{"style":126},[144],{"type":42,"value":145}," *",{"type":33,"tag":118,"props":147,"children":149},{"style":148},"--shiki-default:#4C4F69;--shiki-dark:#ABB2BF",[150],{"type":42,"value":151},".",{"type":33,"tag":118,"props":153,"children":154},{"style":120},[155],{"type":42,"value":156},"md",{"type":33,"tag":118,"props":158,"children":159},{"style":126},[160],{"type":42,"value":129},{"type":33,"tag":118,"props":162,"children":163},{"style":120},[164],{"type":42,"value":165},"l",{"type":33,"tag":118,"props":167,"children":168},{"style":148},[169],{"type":42,"value":170}," | xargs ",{"type":33,"tag":118,"props":172,"children":173},{"style":120},[174],{"type":42,"value":175},"mv",{"type":33,"tag":118,"props":177,"children":178},{"style":126},[179],{"type":42,"value":129},{"type":33,"tag":118,"props":181,"children":182},{"style":120},[183],{"type":42,"value":184},"v",{"type":33,"tag":118,"props":186,"children":187},{"style":126},[188],{"type":42,"value":129},{"type":33,"tag":118,"props":190,"children":191},{"style":120},[192],{"type":42,"value":193},"t",{"type":33,"tag":118,"props":195,"children":197},{"style":196},"--shiki-default:#FE640B;--shiki-dark:#D19A66",[198],{"type":42,"value":199}," 2015",{"type":33,"tag":118,"props":201,"children":202},{"style":148},[203],{"type":42,"value":204},"/",{"type":42,"value":206},"，用于批量移动文件，我借助 Poe Assistant 写出了对应的 PowerShell 脚本。",{"type":33,"tag":208,"props":209,"children":213},"pre",{"code":210,"language":211,"meta":7,"className":212,"style":7},"# 搜索匹配的文件\nGet-ChildItem -Filter \"*.md\" -Recurse | ForEach-Object {\n    $filePath = $_.FullName\n    $match = Select-String -Path $filePath -Pattern \"date: 2020-\" -Quiet\n\n    if ($match) {\n        # 获取文件名\n        $fileName = $_.Name\n\n        # 创建目标目录\n        $targetDirectory = \"2020\"\n        if (-not (Test-Path -Path $targetDirectory)) {\n            New-Item -ItemType Directory -Path $targetDirectory | Out-Null\n        }\n\n        # 移动文件\n        Move-Item -Path $filePath -Destination (Join-Path -Path $targetDirectory -ChildPath $fileName) -Verbose\n    }\n}\n","powershell","language-powershell shiki shiki-themes catppuccin-latte one-dark-pro",[214],{"type":33,"tag":62,"props":215,"children":216},{"__ignoreMap":7},[217,228,278,302,357,367,396,405,427,435,444,462,511,552,561,569,578,657,666],{"type":33,"tag":118,"props":218,"children":221},{"class":219,"line":220},"line",1,[222],{"type":33,"tag":118,"props":223,"children":225},{"style":224},"--shiki-default:#9CA0B0;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic",[226],{"type":42,"value":227},"# 搜索匹配的文件\n",{"type":33,"tag":118,"props":229,"children":231},{"class":219,"line":230},2,[232,238,243,248,253,257,262,267,272],{"type":33,"tag":118,"props":233,"children":235},{"style":234},"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#56B6C2;--shiki-dark-font-style:inherit",[236],{"type":42,"value":237},"Get-ChildItem",{"type":33,"tag":118,"props":239,"children":241},{"style":240},"--shiki-default:#179299;--shiki-dark:#56B6C2",[242],{"type":42,"value":129},{"type":33,"tag":118,"props":244,"children":245},{"style":148},[246],{"type":42,"value":247},"Filter ",{"type":33,"tag":118,"props":249,"children":250},{"style":137},[251],{"type":42,"value":252},"\"*.md\"",{"type":33,"tag":118,"props":254,"children":255},{"style":240},[256],{"type":42,"value":129},{"type":33,"tag":118,"props":258,"children":259},{"style":148},[260],{"type":42,"value":261},"Recurse ",{"type":33,"tag":118,"props":263,"children":264},{"style":126},[265],{"type":42,"value":266},"|",{"type":33,"tag":118,"props":268,"children":269},{"style":234},[270],{"type":42,"value":271}," ForEach-Object",{"type":33,"tag":118,"props":273,"children":275},{"style":274},"--shiki-default:#7C7F93;--shiki-dark:#ABB2BF",[276],{"type":42,"value":277}," {\n",{"type":33,"tag":118,"props":279,"children":281},{"class":219,"line":280},3,[282,287,292,297],{"type":33,"tag":118,"props":283,"children":284},{"style":120},[285],{"type":42,"value":286},"    $filePath",{"type":33,"tag":118,"props":288,"children":289},{"style":240},[290],{"type":42,"value":291}," =",{"type":33,"tag":118,"props":293,"children":294},{"style":148},[295],{"type":42,"value":296}," $_",{"type":33,"tag":118,"props":298,"children":299},{"style":120},[300],{"type":42,"value":301},".FullName\n",{"type":33,"tag":118,"props":303,"children":305},{"class":219,"line":304},4,[306,311,315,320,324,329,334,338,343,348,352],{"type":33,"tag":118,"props":307,"children":308},{"style":120},[309],{"type":42,"value":310},"    $match",{"type":33,"tag":118,"props":312,"children":313},{"style":240},[314],{"type":42,"value":291},{"type":33,"tag":118,"props":316,"children":317},{"style":234},[318],{"type":42,"value":319}," Select-String",{"type":33,"tag":118,"props":321,"children":322},{"style":240},[323],{"type":42,"value":129},{"type":33,"tag":118,"props":325,"children":326},{"style":148},[327],{"type":42,"value":328},"Path ",{"type":33,"tag":118,"props":330,"children":331},{"style":120},[332],{"type":42,"value":333},"$filePath",{"type":33,"tag":118,"props":335,"children":336},{"style":240},[337],{"type":42,"value":129},{"type":33,"tag":118,"props":339,"children":340},{"style":148},[341],{"type":42,"value":342},"Pattern ",{"type":33,"tag":118,"props":344,"children":345},{"style":137},[346],{"type":42,"value":347},"\"date: 2020-\"",{"type":33,"tag":118,"props":349,"children":350},{"style":240},[351],{"type":42,"value":129},{"type":33,"tag":118,"props":353,"children":354},{"style":148},[355],{"type":42,"value":356},"Quiet\n",{"type":33,"tag":118,"props":358,"children":360},{"class":219,"line":359},5,[361],{"type":33,"tag":118,"props":362,"children":364},{"emptyLinePlaceholder":363},true,[365],{"type":42,"value":366},"\n",{"type":33,"tag":118,"props":368,"children":370},{"class":219,"line":369},6,[371,377,382,387,392],{"type":33,"tag":118,"props":372,"children":374},{"style":373},"--shiki-default:#8839EF;--shiki-dark:#C678DD",[375],{"type":42,"value":376},"    if",{"type":33,"tag":118,"props":378,"children":379},{"style":274},[380],{"type":42,"value":381}," (",{"type":33,"tag":118,"props":383,"children":384},{"style":120},[385],{"type":42,"value":386},"$match",{"type":33,"tag":118,"props":388,"children":389},{"style":274},[390],{"type":42,"value":391},")",{"type":33,"tag":118,"props":393,"children":394},{"style":274},[395],{"type":42,"value":277},{"type":33,"tag":118,"props":397,"children":399},{"class":219,"line":398},7,[400],{"type":33,"tag":118,"props":401,"children":402},{"style":224},[403],{"type":42,"value":404},"        # 获取文件名\n",{"type":33,"tag":118,"props":406,"children":408},{"class":219,"line":407},8,[409,414,418,422],{"type":33,"tag":118,"props":410,"children":411},{"style":120},[412],{"type":42,"value":413},"        $fileName",{"type":33,"tag":118,"props":415,"children":416},{"style":240},[417],{"type":42,"value":291},{"type":33,"tag":118,"props":419,"children":420},{"style":148},[421],{"type":42,"value":296},{"type":33,"tag":118,"props":423,"children":424},{"style":120},[425],{"type":42,"value":426},".Name\n",{"type":33,"tag":118,"props":428,"children":430},{"class":219,"line":429},9,[431],{"type":33,"tag":118,"props":432,"children":433},{"emptyLinePlaceholder":363},[434],{"type":42,"value":366},{"type":33,"tag":118,"props":436,"children":438},{"class":219,"line":437},10,[439],{"type":33,"tag":118,"props":440,"children":441},{"style":224},[442],{"type":42,"value":443},"        # 创建目标目录\n",{"type":33,"tag":118,"props":445,"children":447},{"class":219,"line":446},11,[448,453,457],{"type":33,"tag":118,"props":449,"children":450},{"style":120},[451],{"type":42,"value":452},"        $targetDirectory",{"type":33,"tag":118,"props":454,"children":455},{"style":240},[456],{"type":42,"value":291},{"type":33,"tag":118,"props":458,"children":459},{"style":137},[460],{"type":42,"value":461}," \"2020\"\n",{"type":33,"tag":118,"props":463,"children":465},{"class":219,"line":464},12,[466,471,475,480,484,489,493,497,502,507],{"type":33,"tag":118,"props":467,"children":468},{"style":373},[469],{"type":42,"value":470},"        if",{"type":33,"tag":118,"props":472,"children":473},{"style":274},[474],{"type":42,"value":381},{"type":33,"tag":118,"props":476,"children":477},{"style":240},[478],{"type":42,"value":479},"-not",{"type":33,"tag":118,"props":481,"children":482},{"style":274},[483],{"type":42,"value":381},{"type":33,"tag":118,"props":485,"children":486},{"style":234},[487],{"type":42,"value":488},"Test-Path",{"type":33,"tag":118,"props":490,"children":491},{"style":240},[492],{"type":42,"value":129},{"type":33,"tag":118,"props":494,"children":495},{"style":148},[496],{"type":42,"value":328},{"type":33,"tag":118,"props":498,"children":499},{"style":120},[500],{"type":42,"value":501},"$targetDirectory",{"type":33,"tag":118,"props":503,"children":504},{"style":274},[505],{"type":42,"value":506},"))",{"type":33,"tag":118,"props":508,"children":509},{"style":274},[510],{"type":42,"value":277},{"type":33,"tag":118,"props":512,"children":514},{"class":219,"line":513},13,[515,520,524,529,534,538,542,547],{"type":33,"tag":118,"props":516,"children":517},{"style":234},[518],{"type":42,"value":519},"            New-Item",{"type":33,"tag":118,"props":521,"children":522},{"style":240},[523],{"type":42,"value":129},{"type":33,"tag":118,"props":525,"children":526},{"style":148},[527],{"type":42,"value":528},"ItemType Directory ",{"type":33,"tag":118,"props":530,"children":531},{"style":240},[532],{"type":42,"value":533},"-",{"type":33,"tag":118,"props":535,"children":536},{"style":148},[537],{"type":42,"value":328},{"type":33,"tag":118,"props":539,"children":540},{"style":120},[541],{"type":42,"value":501},{"type":33,"tag":118,"props":543,"children":544},{"style":126},[545],{"type":42,"value":546}," |",{"type":33,"tag":118,"props":548,"children":549},{"style":234},[550],{"type":42,"value":551}," Out-Null\n",{"type":33,"tag":118,"props":553,"children":555},{"class":219,"line":554},14,[556],{"type":33,"tag":118,"props":557,"children":558},{"style":274},[559],{"type":42,"value":560},"        }\n",{"type":33,"tag":118,"props":562,"children":564},{"class":219,"line":563},15,[565],{"type":33,"tag":118,"props":566,"children":567},{"emptyLinePlaceholder":363},[568],{"type":42,"value":366},{"type":33,"tag":118,"props":570,"children":572},{"class":219,"line":571},16,[573],{"type":33,"tag":118,"props":574,"children":575},{"style":224},[576],{"type":42,"value":577},"        # 移动文件\n",{"type":33,"tag":118,"props":579,"children":581},{"class":219,"line":580},17,[582,587,591,595,599,603,608,613,618,622,626,630,634,639,644,648,652],{"type":33,"tag":118,"props":583,"children":584},{"style":234},[585],{"type":42,"value":586},"        Move-Item",{"type":33,"tag":118,"props":588,"children":589},{"style":240},[590],{"type":42,"value":129},{"type":33,"tag":118,"props":592,"children":593},{"style":148},[594],{"type":42,"value":328},{"type":33,"tag":118,"props":596,"children":597},{"style":120},[598],{"type":42,"value":333},{"type":33,"tag":118,"props":600,"children":601},{"style":240},[602],{"type":42,"value":129},{"type":33,"tag":118,"props":604,"children":605},{"style":148},[606],{"type":42,"value":607},"Destination ",{"type":33,"tag":118,"props":609,"children":610},{"style":274},[611],{"type":42,"value":612},"(",{"type":33,"tag":118,"props":614,"children":615},{"style":234},[616],{"type":42,"value":617},"Join-Path",{"type":33,"tag":118,"props":619,"children":620},{"style":240},[621],{"type":42,"value":129},{"type":33,"tag":118,"props":623,"children":624},{"style":148},[625],{"type":42,"value":328},{"type":33,"tag":118,"props":627,"children":628},{"style":120},[629],{"type":42,"value":501},{"type":33,"tag":118,"props":631,"children":632},{"style":240},[633],{"type":42,"value":129},{"type":33,"tag":118,"props":635,"children":636},{"style":148},[637],{"type":42,"value":638},"ChildPath ",{"type":33,"tag":118,"props":640,"children":641},{"style":120},[642],{"type":42,"value":643},"$fileName",{"type":33,"tag":118,"props":645,"children":646},{"style":274},[647],{"type":42,"value":391},{"type":33,"tag":118,"props":649,"children":650},{"style":240},[651],{"type":42,"value":129},{"type":33,"tag":118,"props":653,"children":654},{"style":148},[655],{"type":42,"value":656},"Verbose\n",{"type":33,"tag":118,"props":658,"children":660},{"class":219,"line":659},18,[661],{"type":33,"tag":118,"props":662,"children":663},{"style":274},[664],{"type":42,"value":665},"    }\n",{"type":33,"tag":118,"props":667,"children":669},{"class":219,"line":668},19,[670],{"type":33,"tag":118,"props":671,"children":672},{"style":274},[673],{"type":42,"value":674},"}\n",{"type":33,"tag":50,"props":676,"children":678},{"id":677},"设置链接前缀",[679],{"type":42,"value":677},{"type":33,"tag":38,"props":681,"children":682},{},[683,685,691,693,699,701,706,708,714],{"type":42,"value":684},"Hexo 会自动给文章链接带上子文件夹的名称，所以在 ",{"type":33,"tag":62,"props":686,"children":688},{"className":687},[],[689],{"type":42,"value":690},"_config.yml",{"type":42,"value":692}," 设置文章永久链接为仅 ",{"type":33,"tag":62,"props":694,"children":696},{"className":695},[],[697],{"type":42,"value":698},":title/",{"type":42,"value":700},"，就可以满足需求。如果不想要文件夹名或者想要维持原来的 URL 配置，将原先文章永久链接中的 ",{"type":33,"tag":62,"props":702,"children":704},{"className":703},[],[705],{"type":42,"value":698},{"type":42,"value":707}," 替换为 ",{"type":33,"tag":62,"props":709,"children":711},{"className":710},[],[712],{"type":42,"value":713},":name/",{"type":42,"value":715}," 即可。",{"type":33,"tag":50,"props":717,"children":719},{"id":718},"旧链接重定向",[720],{"type":42,"value":718},{"type":33,"tag":38,"props":722,"children":723},{},[724],{"type":42,"value":725},"通过主题提供的自定义侧栏 Widget 能力，我为 404 页面引入了自定义脚本，用于重定向旧链接。",{"type":33,"tag":208,"props":727,"children":732},{"code":728,"filename":729,"language":730,"meta":7,"className":731,"style":7},"site_tree:\n  error_page:\n    leftbar: recent, timeline, notice_404\n","_config.stellar.yml","yaml","language-yaml shiki shiki-themes catppuccin-latte one-dark-pro",[733],{"type":33,"tag":62,"props":734,"children":735},{"__ignoreMap":7},[736,750,762],{"type":33,"tag":118,"props":737,"children":738},{"class":219,"line":220},[739,745],{"type":33,"tag":118,"props":740,"children":742},{"style":741},"--shiki-default:#1E66F5;--shiki-dark:#E06C75",[743],{"type":42,"value":744},"site_tree",{"type":33,"tag":118,"props":746,"children":747},{"style":126},[748],{"type":42,"value":749},":\n",{"type":33,"tag":118,"props":751,"children":752},{"class":219,"line":230},[753,758],{"type":33,"tag":118,"props":754,"children":755},{"style":741},[756],{"type":42,"value":757},"  error_page",{"type":33,"tag":118,"props":759,"children":760},{"style":126},[761],{"type":42,"value":749},{"type":33,"tag":118,"props":763,"children":764},{"class":219,"line":280},[765,770,775],{"type":33,"tag":118,"props":766,"children":767},{"style":741},[768],{"type":42,"value":769},"    leftbar",{"type":33,"tag":118,"props":771,"children":772},{"style":126},[773],{"type":42,"value":774},":",{"type":33,"tag":118,"props":776,"children":777},{"style":137},[778],{"type":42,"value":779}," recent, timeline, notice_404\n",{"type":33,"tag":208,"props":781,"children":784},{"code":782,"filename":783,"language":730,"meta":7,"className":731,"style":7},"notice_404:\n  layout: markdown\n  content: |\n    \u003C!-- Notice 还没想好，以后再写吧 -->\n    \u003Cscript src=\"/static/handler-404.js\">\u003C/script>\n","source/_data/widgets.yml",[785],{"type":33,"tag":62,"props":786,"children":787},{"__ignoreMap":7},[788,800,817,834,842],{"type":33,"tag":118,"props":789,"children":790},{"class":219,"line":220},[791,796],{"type":33,"tag":118,"props":792,"children":793},{"style":741},[794],{"type":42,"value":795},"notice_404",{"type":33,"tag":118,"props":797,"children":798},{"style":126},[799],{"type":42,"value":749},{"type":33,"tag":118,"props":801,"children":802},{"class":219,"line":230},[803,808,812],{"type":33,"tag":118,"props":804,"children":805},{"style":741},[806],{"type":42,"value":807},"  layout",{"type":33,"tag":118,"props":809,"children":810},{"style":126},[811],{"type":42,"value":774},{"type":33,"tag":118,"props":813,"children":814},{"style":137},[815],{"type":42,"value":816}," markdown\n",{"type":33,"tag":118,"props":818,"children":819},{"class":219,"line":280},[820,825,829],{"type":33,"tag":118,"props":821,"children":822},{"style":741},[823],{"type":42,"value":824},"  content",{"type":33,"tag":118,"props":826,"children":827},{"style":126},[828],{"type":42,"value":774},{"type":33,"tag":118,"props":830,"children":831},{"style":373},[832],{"type":42,"value":833}," |\n",{"type":33,"tag":118,"props":835,"children":836},{"class":219,"line":304},[837],{"type":33,"tag":118,"props":838,"children":839},{"style":137},[840],{"type":42,"value":841},"    \u003C!-- Notice 还没想好，以后再写吧 -->\n",{"type":33,"tag":118,"props":843,"children":844},{"class":219,"line":359},[845],{"type":33,"tag":118,"props":846,"children":847},{"style":137},[848],{"type":42,"value":849},"    \u003Cscript src=\"/static/handler-404.js\">\u003C/script>\n",{"type":33,"tag":38,"props":851,"children":852},{},[853],{"type":42,"value":854},"用正则表达式匹配、替换，就完成了重定向。",{"type":33,"tag":208,"props":856,"children":861},{"code":857,"filename":858,"language":859,"meta":7,"className":860,"style":7},"const newPath = location.pathname.match(/^(\\/\\d{4})\\d{2}(\\/.*)/)\nif (newPath)\n    location.href = newPath[1] + newPath[2]\n","static/handler-404.js","js","language-js shiki shiki-themes catppuccin-latte one-dark-pro",[862],{"type":33,"tag":62,"props":863,"children":864},{"__ignoreMap":7},[865,986,1007],{"type":33,"tag":118,"props":866,"children":867},{"class":219,"line":220},[868,873,879,883,888,892,897,901,907,911,916,921,926,932,937,943,947,951,956,960,964,968,973,977,981],{"type":33,"tag":118,"props":869,"children":870},{"style":373},[871],{"type":42,"value":872},"const",{"type":33,"tag":118,"props":874,"children":876},{"style":875},"--shiki-default:#4C4F69;--shiki-dark:#E5C07B",[877],{"type":42,"value":878}," newPath",{"type":33,"tag":118,"props":880,"children":881},{"style":240},[882],{"type":42,"value":291},{"type":33,"tag":118,"props":884,"children":885},{"style":875},[886],{"type":42,"value":887}," location",{"type":33,"tag":118,"props":889,"children":890},{"style":126},[891],{"type":42,"value":151},{"type":33,"tag":118,"props":893,"children":894},{"style":875},[895],{"type":42,"value":896},"pathname",{"type":33,"tag":118,"props":898,"children":899},{"style":126},[900],{"type":42,"value":151},{"type":33,"tag":118,"props":902,"children":904},{"style":903},"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit",[905],{"type":42,"value":906},"match",{"type":33,"tag":118,"props":908,"children":909},{"style":148},[910],{"type":42,"value":612},{"type":33,"tag":118,"props":912,"children":914},{"style":913},"--shiki-default:#EA76CB;--shiki-dark:#E06C75",[915],{"type":42,"value":204},{"type":33,"tag":118,"props":917,"children":918},{"style":373},[919],{"type":42,"value":920},"^",{"type":33,"tag":118,"props":922,"children":924},{"style":923},"--shiki-default:#40A02B;--shiki-dark:#E06C75",[925],{"type":42,"value":612},{"type":33,"tag":118,"props":927,"children":929},{"style":928},"--shiki-default:#EA76CB;--shiki-dark:#56B6C2",[930],{"type":42,"value":931},"\\/",{"type":33,"tag":118,"props":933,"children":934},{"style":913},[935],{"type":42,"value":936},"\\d",{"type":33,"tag":118,"props":938,"children":940},{"style":939},"--shiki-default:#179299;--shiki-dark:#D19A66",[941],{"type":42,"value":942},"{4}",{"type":33,"tag":118,"props":944,"children":945},{"style":923},[946],{"type":42,"value":391},{"type":33,"tag":118,"props":948,"children":949},{"style":913},[950],{"type":42,"value":936},{"type":33,"tag":118,"props":952,"children":953},{"style":939},[954],{"type":42,"value":955},"{2}",{"type":33,"tag":118,"props":957,"children":958},{"style":923},[959],{"type":42,"value":612},{"type":33,"tag":118,"props":961,"children":962},{"style":928},[963],{"type":42,"value":931},{"type":33,"tag":118,"props":965,"children":966},{"style":913},[967],{"type":42,"value":151},{"type":33,"tag":118,"props":969,"children":970},{"style":939},[971],{"type":42,"value":972},"*",{"type":33,"tag":118,"props":974,"children":975},{"style":923},[976],{"type":42,"value":391},{"type":33,"tag":118,"props":978,"children":979},{"style":913},[980],{"type":42,"value":204},{"type":33,"tag":118,"props":982,"children":983},{"style":148},[984],{"type":42,"value":985},")\n",{"type":33,"tag":118,"props":987,"children":988},{"class":219,"line":230},[989,994,998,1003],{"type":33,"tag":118,"props":990,"children":991},{"style":373},[992],{"type":42,"value":993},"if",{"type":33,"tag":118,"props":995,"children":996},{"style":148},[997],{"type":42,"value":381},{"type":33,"tag":118,"props":999,"children":1000},{"style":120},[1001],{"type":42,"value":1002},"newPath",{"type":33,"tag":118,"props":1004,"children":1005},{"style":148},[1006],{"type":42,"value":985},{"type":33,"tag":118,"props":1008,"children":1009},{"class":219,"line":280},[1010,1015,1019,1024,1028,1032,1037,1042,1047,1052,1056,1060,1065],{"type":33,"tag":118,"props":1011,"children":1012},{"style":875},[1013],{"type":42,"value":1014},"    location",{"type":33,"tag":118,"props":1016,"children":1017},{"style":126},[1018],{"type":42,"value":151},{"type":33,"tag":118,"props":1020,"children":1021},{"style":120},[1022],{"type":42,"value":1023},"href",{"type":33,"tag":118,"props":1025,"children":1026},{"style":240},[1027],{"type":42,"value":291},{"type":33,"tag":118,"props":1029,"children":1030},{"style":120},[1031],{"type":42,"value":878},{"type":33,"tag":118,"props":1033,"children":1034},{"style":148},[1035],{"type":42,"value":1036},"[",{"type":33,"tag":118,"props":1038,"children":1039},{"style":196},[1040],{"type":42,"value":1041},"1",{"type":33,"tag":118,"props":1043,"children":1044},{"style":148},[1045],{"type":42,"value":1046},"] ",{"type":33,"tag":118,"props":1048,"children":1049},{"style":240},[1050],{"type":42,"value":1051},"+",{"type":33,"tag":118,"props":1053,"children":1054},{"style":120},[1055],{"type":42,"value":878},{"type":33,"tag":118,"props":1057,"children":1058},{"style":148},[1059],{"type":42,"value":1036},{"type":33,"tag":118,"props":1061,"children":1062},{"style":196},[1063],{"type":42,"value":1064},"2",{"type":33,"tag":118,"props":1066,"children":1067},{"style":148},[1068],{"type":42,"value":1069},"]\n",{"type":33,"tag":38,"props":1071,"children":1072},{},[1073],{"type":42,"value":1074},"Over.",{"type":33,"tag":50,"props":1076,"children":1078},{"id":1077},"还没有结束",[1079],{"type":42,"value":1077},{"type":33,"tag":38,"props":1081,"children":1082},{},[1083,1089],{"type":33,"tag":104,"props":1084,"children":1086},{"href":1085},"#%E6%97%A7%E9%93%BE%E6%8E%A5%E9%87%8D%E5%AE%9A%E5%90%91",[1087],{"type":42,"value":1088},"上一节",{"type":42,"value":1090}," 的内容废弃了。",{"type":33,"tag":38,"props":1092,"children":1093},{},[1094,1096,1104],{"type":42,"value":1095},"HTTP 状态码不该是 404，所以需要通过 Netlify 提供的 ",{"type":33,"tag":104,"props":1097,"children":1101},{"href":1098,"rel":1099},"https://docs.netlify.com/routing/redirects/redirect-options/",[1100],"nofollow",[1102],{"type":42,"value":1103},"重定向能力",{"type":42,"value":1105},"，让状态码变为 3xx。",{"type":33,"tag":38,"props":1107,"children":1108},{},[1109,1111,1117,1119,1125],{"type":42,"value":1110},"在建博客时埋了一个坑，我的链接是 ",{"type":33,"tag":62,"props":1112,"children":1114},{"className":1113},[],[1115],{"type":42,"value":1116},":year:month/:title/",{"type":42,"value":1118},"，而 Netlify 的 Placeholder 仅支持诸如 ",{"type":33,"tag":62,"props":1120,"children":1122},{"className":1121},[],[1123],{"type":42,"value":1124},":year/:month/:title/",{"type":42,"value":1126}," 的形式，所以不能使用这种配置文件：",{"type":33,"tag":208,"props":1128,"children":1133},{"code":1129,"filename":1130,"language":1131,"meta":7,"className":1132,"style":7},"[[redirects]]\nfrom = \"/post/*\"\nto = \"/:splat\"\n\n[[redirects]]\nfrom = \"/:year/:month/:date/:slug\"\nto = \"/:slug\"\n","source/netlify.toml","toml","language-toml shiki shiki-themes catppuccin-latte one-dark-pro",[1134],{"type":33,"tag":62,"props":1135,"children":1136},{"__ignoreMap":7},[1137,1156,1173,1190,1197,1212,1228],{"type":33,"tag":118,"props":1138,"children":1139},{"class":219,"line":220},[1140,1145,1151],{"type":33,"tag":118,"props":1141,"children":1142},{"style":274},[1143],{"type":42,"value":1144},"[[",{"type":33,"tag":118,"props":1146,"children":1148},{"style":1147},"--shiki-default:#4C4F69;--shiki-dark:#61AFEF",[1149],{"type":42,"value":1150},"redirects",{"type":33,"tag":118,"props":1152,"children":1153},{"style":274},[1154],{"type":42,"value":1155},"]]\n",{"type":33,"tag":118,"props":1157,"children":1158},{"class":219,"line":230},[1159,1164,1168],{"type":33,"tag":118,"props":1160,"children":1161},{"style":120},[1162],{"type":42,"value":1163},"from",{"type":33,"tag":118,"props":1165,"children":1166},{"style":126},[1167],{"type":42,"value":291},{"type":33,"tag":118,"props":1169,"children":1170},{"style":137},[1171],{"type":42,"value":1172}," \"/post/*\"\n",{"type":33,"tag":118,"props":1174,"children":1175},{"class":219,"line":280},[1176,1181,1185],{"type":33,"tag":118,"props":1177,"children":1178},{"style":120},[1179],{"type":42,"value":1180},"to",{"type":33,"tag":118,"props":1182,"children":1183},{"style":126},[1184],{"type":42,"value":291},{"type":33,"tag":118,"props":1186,"children":1187},{"style":137},[1188],{"type":42,"value":1189}," \"/:splat\"\n",{"type":33,"tag":118,"props":1191,"children":1192},{"class":219,"line":304},[1193],{"type":33,"tag":118,"props":1194,"children":1195},{"emptyLinePlaceholder":363},[1196],{"type":42,"value":366},{"type":33,"tag":118,"props":1198,"children":1199},{"class":219,"line":359},[1200,1204,1208],{"type":33,"tag":118,"props":1201,"children":1202},{"style":274},[1203],{"type":42,"value":1144},{"type":33,"tag":118,"props":1205,"children":1206},{"style":1147},[1207],{"type":42,"value":1150},{"type":33,"tag":118,"props":1209,"children":1210},{"style":274},[1211],{"type":42,"value":1155},{"type":33,"tag":118,"props":1213,"children":1214},{"class":219,"line":369},[1215,1219,1223],{"type":33,"tag":118,"props":1216,"children":1217},{"style":120},[1218],{"type":42,"value":1163},{"type":33,"tag":118,"props":1220,"children":1221},{"style":126},[1222],{"type":42,"value":291},{"type":33,"tag":118,"props":1224,"children":1225},{"style":137},[1226],{"type":42,"value":1227}," \"/:year/:month/:date/:slug\"\n",{"type":33,"tag":118,"props":1229,"children":1230},{"class":219,"line":398},[1231,1235,1239],{"type":33,"tag":118,"props":1232,"children":1233},{"style":120},[1234],{"type":42,"value":1180},{"type":33,"tag":118,"props":1236,"children":1237},{"style":126},[1238],{"type":42,"value":291},{"type":33,"tag":118,"props":1240,"children":1241},{"style":137},[1242],{"type":42,"value":1243}," \"/:slug\"\n",{"type":33,"tag":38,"props":1245,"children":1246},{},[1247,1249,1255,1257,1263,1265,1271],{"type":42,"value":1248},"所以我只能给每个博客 URL 分别设置重定向规则。为了获取先前的 URL 路径，我恢复了旧的 ",{"type":33,"tag":62,"props":1250,"children":1252},{"className":1251},[],[1253],{"type":42,"value":1254},"permalink",{"type":42,"value":1256}," 配置，把其中的 ",{"type":33,"tag":62,"props":1258,"children":1260},{"className":1259},[],[1261],{"type":42,"value":1262},":title",{"type":42,"value":1264}," 改为 ",{"type":33,"tag":62,"props":1266,"children":1268},{"className":1267},[],[1269],{"type":42,"value":1270},":name",{"type":42,"value":1272},"。",{"type":33,"tag":208,"props":1274,"children":1276},{"code":1275,"filename":690,"language":730,"meta":7,"className":731,"style":7},"permalink: :year:month/:name/\n# permalink: :title/\n",[1277],{"type":33,"tag":62,"props":1278,"children":1279},{"__ignoreMap":7},[1280,1296],{"type":33,"tag":118,"props":1281,"children":1282},{"class":219,"line":220},[1283,1287,1291],{"type":33,"tag":118,"props":1284,"children":1285},{"style":741},[1286],{"type":42,"value":1254},{"type":33,"tag":118,"props":1288,"children":1289},{"style":126},[1290],{"type":42,"value":774},{"type":33,"tag":118,"props":1292,"children":1293},{"style":137},[1294],{"type":42,"value":1295}," :year:month/:name/\n",{"type":33,"tag":118,"props":1297,"children":1298},{"class":219,"line":230},[1299],{"type":33,"tag":118,"props":1300,"children":1301},{"style":224},[1302],{"type":42,"value":1303},"# permalink: :title/\n",{"type":33,"tag":38,"props":1305,"children":1306},{},[1307],{"type":42,"value":1308},"要一条一条写重定向规则，有点麻烦，可以这么做：",{"type":33,"tag":1310,"props":1311,"children":1312},"ul",{},[1313,1325],{"type":33,"tag":1314,"props":1315,"children":1316},"li",{},[1317,1319],{"type":42,"value":1318},"尝试用命令生成先前博客链接路径和新的博客链接路径\n",{"type":33,"tag":1320,"props":1321,"children":1324},"copy",{"code":1322,"prompt":1323},"hexo clean; hexo generate","PS>",[],{"type":33,"tag":1314,"props":1326,"children":1327},{},[1328,1330,1343,1345],{"type":42,"value":1329},"findstr 不完全支持 PCRE，可以用 ",{"type":33,"tag":62,"props":1331,"children":1332},{"className":212,"language":211,"style":7},[1333,1338],{"type":33,"tag":118,"props":1334,"children":1335},{"style":234},[1336],{"type":42,"value":1337},"Select-String",{"type":33,"tag":118,"props":1339,"children":1340},{"style":137},[1341],{"type":42,"value":1342}," \"\\\\\\d{6}\\\\\"",{"type":42,"value":1344}," 代替\n",{"type":33,"tag":1320,"props":1346,"children":1348},{"code":1347,"prompt":1323},"dir -s .\\public\\ | findstr -r \"\\\\[0-9][0-9][0-9][0-9][0-9][0-9]\\\\\"",[],{"type":33,"tag":38,"props":1350,"children":1351},{},[1352,1354,1359],{"type":42,"value":1353},"再用正则表达式稍微替换一下输出（不要忘了",{"type":33,"tag":62,"props":1355,"children":1357},{"className":1356},[],[1358],{"type":42,"value":204},{"type":42,"value":1360},"），就能得到 Netlify 的重定向规则文件了。",{"type":33,"tag":208,"props":1362,"children":1365},{"code":1363,"filename":1364,"meta":7},"……\n/202304/vscode-simple-config /2023/vscode-simple-config\n/202305/archinstall-guide /2023/archinstall-guide\n/202306/archlinux-configure /2023/archlinux-configure\n/202307/archlinux-beautify /2023/archlinux-beautify\n……\n","source/_redirects",[1366],{"type":33,"tag":62,"props":1367,"children":1368},{"__ignoreMap":7},[1369],{"type":42,"value":1363},{"type":33,"tag":38,"props":1371,"children":1372},{},[1373,1375,1381],{"type":42,"value":1374},"如果 generate 的文件中没有 ",{"type":33,"tag":62,"props":1376,"children":1378},{"className":1377},[],[1379],{"type":42,"value":1380},"_redirects",{"type":42,"value":1382}," 文件，那就修改一下配置文件：",{"type":33,"tag":208,"props":1384,"children":1386},{"code":1385,"filename":690,"language":730,"meta":7,"className":731,"style":7},"include: [_redirects]\n",[1387],{"type":33,"tag":62,"props":1388,"children":1389},{"__ignoreMap":7},[1390],{"type":33,"tag":118,"props":1391,"children":1392},{"class":219,"line":220},[1393,1398,1402,1407,1411],{"type":33,"tag":118,"props":1394,"children":1395},{"style":741},[1396],{"type":42,"value":1397},"include",{"type":33,"tag":118,"props":1399,"children":1400},{"style":126},[1401],{"type":42,"value":774},{"type":33,"tag":118,"props":1403,"children":1404},{"style":274},[1405],{"type":42,"value":1406}," [",{"type":33,"tag":118,"props":1408,"children":1409},{"style":137},[1410],{"type":42,"value":1380},{"type":33,"tag":118,"props":1412,"children":1413},{"style":274},[1414],{"type":42,"value":1069},{"type":33,"tag":38,"props":1416,"children":1417},{},[1418],{"type":42,"value":1419},"这下应该 over 了。",{"type":33,"tag":50,"props":1421,"children":1423},{"id":1422},"又没有结束",[1424],{"type":42,"value":1422},{"type":33,"tag":38,"props":1426,"children":1427},{},[1428],{"type":42,"value":1429},"5个月后，我通过 Google Search Console 发现收录的博客链接还是原先的。于是又通过 Nuxt 的能力编写了新的重定向脚本，并期待它能获取到 canonical 标签。",{"type":33,"tag":1431,"props":1432,"children":1433},"style",{},[1434],{"type":42,"value":1435},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":7,"searchDepth":304,"depth":304,"links":1437},[1438,1439,1440,1441,1442,1443],{"id":52,"depth":230,"text":55},{"id":95,"depth":230,"text":95},{"id":677,"depth":230,"text":677},{"id":718,"depth":230,"text":718},{"id":1077,"depth":230,"text":1077},{"id":1422,"depth":230,"text":1422},"markdown","content:posts:2024:blog-link-pattern.md","content","posts/2024/blog-link-pattern.md","posts/2024/blog-link-pattern","/posts",[1451,1455],{"_path":1452,"title":1453,"date":1454},"/2024/magic-code","写过的奇妙代码。","2024-04-07T04:32:11.000Z",{"_path":1456,"title":1457,"date":1458,"type":1459},"/2024/fake-today","今日有「假」","2024-05-03T04:22:31.000Z","story",1743402552394]