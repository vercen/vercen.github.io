[{"data":1,"prerenderedAt":725},["ShallowReactive",2],{"/2024/dosbox-setup":3,"surround-/2024/dosbox-setup":715},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"updated":11,"categories":12,"tags":14,"readingTime":18,"body":23,"_type":708,"_id":709,"_source":710,"_file":711,"_stem":712,"_extension":713,"_original_dir":714},"/2024/dosbox-setup","2024",false,"","使用 DOSBox 的多种方式","DOSBox 放大画面、自动挂载、网页版和 VS Code 插件。","2024-05-11T08:05:40.000Z","2024-05-30T08:42:29.000Z",[13],"经验分享",[15,16,17],"教程","软件","DOSBox",{"text":19,"minutes":20,"time":21,"words":22},"4 min read",3.96,237600,792,{"type":24,"children":25,"toc":698},"root",[26,34,41,124,130,135,163,169,183,188,241,362,367,394,503,531,537,544,558,563,569,575,680,692],{"type":27,"tag":28,"props":29,"children":30},"element","p",{},[31],{"type":32,"value":33},"text","学校开展了计算机科学导论、微型计算机原理与接口技术相关课程，要求学生使用 DOSBox 模拟 DOS 环境进行汇编。但网上看到的教程不全，遂撰写此文。",{"type":27,"tag":35,"props":36,"children":38},"h2",{"id":37},"在-windows-上安装-dosbox",[39],{"type":32,"value":40},"在 Windows 上安装 DOSBox",{"type":27,"tag":42,"props":43,"children":44},"ul",{},[45,77],{"type":27,"tag":46,"props":47,"children":48},"li",{},[49,51],{"type":32,"value":50},"下载 DOSBox 并安装。\n",{"type":27,"tag":42,"props":52,"children":53},{},[54,66],{"type":27,"tag":46,"props":55,"children":56},{},[57],{"type":27,"tag":58,"props":59,"children":63},"a",{"href":60,"rel":61},"https://www.dosbox.com/download.php#:~:text=Windows",[62],"nofollow",[64],{"type":32,"value":65},"官网下载",{"type":27,"tag":46,"props":67,"children":68},{},[69,71],{"type":32,"value":70},"如果你电脑具有较好的国际互联网接入环境，可以通过 WinGet 一键安装。\n",{"type":27,"tag":72,"props":73,"children":76},"copy",{"code":74,"prompt":75},"winget install dosbox","PS>",[],{"type":27,"tag":46,"props":78,"children":79},{},[80,82,89,91],{"type":32,"value":81},"在以下地址之一下载 MASM 套件，解压到 ",{"type":27,"tag":83,"props":84,"children":86},"code",{"className":85},[],[87],{"type":32,"value":88},"D:\\Software\\MASM",{"type":32,"value":90},"。\n",{"type":27,"tag":42,"props":92,"children":93},{},[94,104,114],{"type":27,"tag":46,"props":95,"children":96},{},[97],{"type":27,"tag":58,"props":98,"children":101},{"href":99,"rel":100},"https://github.com/dosasm/dosrun/tree/main/bundles/src/MASM-v5.00/masm",[62],[102],{"type":32,"value":103},"dosasm/dosrun MASM-v5.00",{"type":27,"tag":46,"props":105,"children":106},{},[107],{"type":27,"tag":58,"props":108,"children":111},{"href":109,"rel":110},"https://github.com/dosasm/dosrun/tree/main/bundles/src/MASM-v6.11/masm",[62],[112],{"type":32,"value":113},"dosasm/dosrun MASM-v6.11",{"type":27,"tag":46,"props":115,"children":116},{},[117],{"type":27,"tag":58,"props":118,"children":121},{"href":119,"rel":120},"https://github.com/froginwell/assembly/tree/master/software",[62],[122],{"type":32,"value":123},"froginwell/assembly",{"type":27,"tag":125,"props":126,"children":128},"h3",{"id":127},"优化体验",[129],{"type":32,"value":127},{"type":27,"tag":28,"props":131,"children":132},{},[133],{"type":32,"value":134},"使用以下方式之一打开配置文件，版本号可能有所不同：",{"type":27,"tag":42,"props":136,"children":137},{},[138,143,148,156],{"type":27,"tag":46,"props":139,"children":140},{},[141],{"type":32,"value":142},"在开始菜单中搜索“DOSBox 0.74-3 Options”打开。",{"type":27,"tag":46,"props":144,"children":145},{},[146],{"type":32,"value":147},"在“开始菜单>所有应用>DOSBox 0.74-3”中找到“DOSBox 0.74-3 Options”打开。",{"type":27,"tag":46,"props":149,"children":150},{},[151],{"type":27,"tag":72,"props":152,"children":155},{"code":153,"prompt":154},"notepad %LocalAppData%\\DOSBox\\dosbox-0.74-3.conf","CMD>",[],{"type":27,"tag":46,"props":157,"children":158},{},[159],{"type":27,"tag":72,"props":160,"children":162},{"code":161,"prompt":75},"code $env:LOCALAPPDATA\\DOSBox\\dosbox-0.74-3.conf",[],{"type":27,"tag":164,"props":165,"children":167},"h4",{"id":166},"修改显示大小",[168],{"type":32,"value":166},{"type":27,"tag":170,"props":171,"children":172},"blockquote",{},[173,178],{"type":27,"tag":28,"props":174,"children":175},{},[176],{"type":32,"value":177},"Alt-Enter 组合键可以切换全屏和窗口模式，但是全屏后任何焦点变化（打开开始菜单、切换窗口）都会导致退出全屏。",{"type":27,"tag":28,"props":179,"children":180},{},[181],{"type":32,"value":182},"切换全屏和窗口模式时，会伴有屏幕分辨率切换，会短暂黑屏几秒，并且其他窗口大小会受到影响（未最大化的窗口缩小到640*400，即受到全屏时的分辨率限制）。因此建议通过修改配置文件来避免使用全屏模式。",{"type":27,"tag":28,"props":184,"children":185},{},[186],{"type":32,"value":187},"找到配置文件开头的这两行：",{"type":27,"tag":189,"props":190,"children":195},"pre",{"className":191,"code":192,"filename":193,"language":194,"meta":7,"style":7},"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","windowresolution=original\noutput=surface\n","doxbox-0.74-3.conf","ini",[196],{"type":27,"tag":83,"props":197,"children":198},{"__ignoreMap":7},[199,223],{"type":27,"tag":200,"props":201,"children":204},"span",{"class":202,"line":203},"line",1,[205,211,217],{"type":27,"tag":200,"props":206,"children":208},{"style":207},"--shiki-default:#1E66F5;--shiki-dark:#C678DD",[209],{"type":32,"value":210},"windowresolution",{"type":27,"tag":200,"props":212,"children":214},{"style":213},"--shiki-default:#179299;--shiki-dark:#ABB2BF",[215],{"type":32,"value":216},"=",{"type":27,"tag":200,"props":218,"children":220},{"style":219},"--shiki-default:#4C4F69;--shiki-dark:#98C379",[221],{"type":32,"value":222},"original\n",{"type":27,"tag":200,"props":224,"children":226},{"class":202,"line":225},2,[227,232,236],{"type":27,"tag":200,"props":228,"children":229},{"style":207},[230],{"type":32,"value":231},"output",{"type":27,"tag":200,"props":233,"children":234},{"style":213},[235],{"type":32,"value":216},{"type":27,"tag":200,"props":237,"children":238},{"style":219},[239],{"type":32,"value":240},"surface\n",{"type":27,"tag":42,"props":242,"children":243},{},[244,285],{"type":27,"tag":46,"props":245,"children":246},{},[247,249,254,256],{"type":32,"value":248},"想要放大画面，可以修改 ",{"type":27,"tag":83,"props":250,"children":252},{"className":251},[],[253],{"type":32,"value":210},{"type":32,"value":255}," 为以下值：\n",{"type":27,"tag":42,"props":257,"children":258},{},[259,272],{"type":27,"tag":46,"props":260,"children":261},{},[262,270],{"type":27,"tag":83,"props":263,"children":264},{"className":191,"language":194,"style":7},[265],{"type":27,"tag":200,"props":266,"children":267},{"style":219},[268],{"type":32,"value":269},"1280x800",{"type":32,"value":271},"（2倍）",{"type":27,"tag":46,"props":273,"children":274},{},[275,283],{"type":27,"tag":83,"props":276,"children":277},{"className":191,"language":194,"style":7},[278],{"type":27,"tag":200,"props":279,"children":280},{"style":219},[281],{"type":32,"value":282},"960x600",{"type":32,"value":284},"（1.5倍）",{"type":27,"tag":46,"props":286,"children":287},{},[288,290,295,297,302,304],{"type":32,"value":289},"如果修改了 ",{"type":27,"tag":83,"props":291,"children":293},{"className":292},[],[294],{"type":32,"value":210},{"type":32,"value":296},"，",{"type":27,"tag":83,"props":298,"children":300},{"className":299},[],[301],{"type":32,"value":231},{"type":32,"value":303}," 方式也要修改。\n",{"type":27,"tag":42,"props":305,"children":306},{},[307,337],{"type":27,"tag":46,"props":308,"children":309},{},[310,312,320,322,328,330,335],{"type":32,"value":311},"网上的多数教程都改成了 ",{"type":27,"tag":83,"props":313,"children":314},{"className":191,"language":194,"style":7},[315],{"type":27,"tag":200,"props":316,"children":317},{"style":219},[318],{"type":32,"value":319},"opengl",{"type":32,"value":321},"，这种方式会导致",{"type":27,"tag":323,"props":324,"children":325},"strong",{},[326],{"type":32,"value":327},"缩放模糊",{"type":32,"value":329},"。并且多数学生使用的笔记本同时具有核显和独显，OpenGL 引擎启动时会调用独立显卡，",{"type":27,"tag":323,"props":331,"children":332},{},[333],{"type":32,"value":334},"增加耗电",{"type":32,"value":336},"。",{"type":27,"tag":46,"props":338,"children":339},{},[340,342,350,352,360],{"type":32,"value":341},"在这里，本人推荐改成 ",{"type":27,"tag":83,"props":343,"children":344},{"className":191,"language":194,"style":7},[345],{"type":27,"tag":200,"props":346,"children":347},{"style":219},[348],{"type":32,"value":349},"overlay",{"type":32,"value":351}," 或者 ",{"type":27,"tag":83,"props":353,"children":354},{"className":191,"language":194,"style":7},[355],{"type":27,"tag":200,"props":356,"children":357},{"style":219},[358],{"type":32,"value":359},"ddraw",{"type":32,"value":361},"，这些输出方式使用临近（Nearest）缩放算法，字体边缘更清晰，不会出现模糊。",{"type":27,"tag":164,"props":363,"children":365},{"id":364},"自动挂载",[366],{"type":32,"value":364},{"type":27,"tag":28,"props":368,"children":369},{},[370,372,392],{"type":32,"value":371},"在配置文件末尾，",{"type":27,"tag":83,"props":373,"children":374},{"className":191,"language":194,"style":7},[375,381,387],{"type":27,"tag":200,"props":376,"children":378},{"style":377},"--shiki-default:#7C7F93;--shiki-dark:#61AFEF",[379],{"type":32,"value":380},"[",{"type":27,"tag":200,"props":382,"children":384},{"style":383},"--shiki-default:#DF8E1D;--shiki-dark:#61AFEF",[385],{"type":32,"value":386},"autoexec",{"type":27,"tag":200,"props":388,"children":389},{"style":377},[390],{"type":32,"value":391},"]",{"type":32,"value":393}," 一节下添加以下内容，参数中的文件夹路径可以随自己喜好修改：",{"type":27,"tag":189,"props":395,"children":397},{"className":191,"code":396,"filename":193,"language":194,"meta":7,"style":7},"[autoexec]\n# 将 Windows 系统 D:\\Software\\MASM 文件夹挂载到 DOS 虚拟磁盘 C:\nMOUNT C D:\\Software\\MASM\n# 设置 C: 为 PATH，使得 MASM 文件夹中的程序在任何目录下都可调用\nSET PATH=C:\n# 将【已经创建的】本地代码目录挂载到 DOS 虚拟磁盘 D:\nMOUNT D D:\\CodeXUPT\\Assembly\n# 切换到 D:\nD:\n",[398],{"type":27,"tag":83,"props":399,"children":400},{"__ignoreMap":7},[401,417,426,435,444,467,476,485,494],{"type":27,"tag":200,"props":402,"children":403},{"class":202,"line":203},[404,408,412],{"type":27,"tag":200,"props":405,"children":406},{"style":377},[407],{"type":32,"value":380},{"type":27,"tag":200,"props":409,"children":410},{"style":383},[411],{"type":32,"value":386},{"type":27,"tag":200,"props":413,"children":414},{"style":377},[415],{"type":32,"value":416},"]\n",{"type":27,"tag":200,"props":418,"children":419},{"class":202,"line":225},[420],{"type":27,"tag":200,"props":421,"children":423},{"style":422},"--shiki-default:#9CA0B0;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic",[424],{"type":32,"value":425},"# 将 Windows 系统 D:\\Software\\MASM 文件夹挂载到 DOS 虚拟磁盘 C:\n",{"type":27,"tag":200,"props":427,"children":429},{"class":202,"line":428},3,[430],{"type":27,"tag":200,"props":431,"children":432},{"style":219},[433],{"type":32,"value":434},"MOUNT C D:\\Software\\MASM\n",{"type":27,"tag":200,"props":436,"children":438},{"class":202,"line":437},4,[439],{"type":27,"tag":200,"props":440,"children":441},{"style":422},[442],{"type":32,"value":443},"# 设置 C: 为 PATH，使得 MASM 文件夹中的程序在任何目录下都可调用\n",{"type":27,"tag":200,"props":445,"children":447},{"class":202,"line":446},5,[448,453,458,462],{"type":27,"tag":200,"props":449,"children":450},{"style":219},[451],{"type":32,"value":452},"SET ",{"type":27,"tag":200,"props":454,"children":455},{"style":207},[456],{"type":32,"value":457},"PATH",{"type":27,"tag":200,"props":459,"children":460},{"style":213},[461],{"type":32,"value":216},{"type":27,"tag":200,"props":463,"children":464},{"style":219},[465],{"type":32,"value":466},"C:\n",{"type":27,"tag":200,"props":468,"children":470},{"class":202,"line":469},6,[471],{"type":27,"tag":200,"props":472,"children":473},{"style":422},[474],{"type":32,"value":475},"# 将【已经创建的】本地代码目录挂载到 DOS 虚拟磁盘 D:\n",{"type":27,"tag":200,"props":477,"children":479},{"class":202,"line":478},7,[480],{"type":27,"tag":200,"props":481,"children":482},{"style":219},[483],{"type":32,"value":484},"MOUNT D D:\\CodeXUPT\\Assembly\n",{"type":27,"tag":200,"props":486,"children":488},{"class":202,"line":487},8,[489],{"type":27,"tag":200,"props":490,"children":491},{"style":422},[492],{"type":32,"value":493},"# 切换到 D:\n",{"type":27,"tag":200,"props":495,"children":497},{"class":202,"line":496},9,[498],{"type":27,"tag":200,"props":499,"children":500},{"style":219},[501],{"type":32,"value":502},"D:\n",{"type":27,"tag":28,"props":504,"children":505},{},[506,508,519,521,529],{"type":32,"value":507},"这样，启动 DOSBox 后，就会自动挂载 MASM 文件夹和代码文件夹。并且可以在代码目录下，直接通过 ",{"type":27,"tag":83,"props":509,"children":512},{"className":510,"language":511,"style":7},"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","sh",[513],{"type":27,"tag":200,"props":514,"children":516},{"style":515},"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit",[517],{"type":32,"value":518},"masm",{"type":32,"value":520}," ",{"type":27,"tag":83,"props":522,"children":523},{"className":510,"language":511,"style":7},[524],{"type":27,"tag":200,"props":525,"children":526},{"style":515},[527],{"type":32,"value":528},"debug",{"type":32,"value":530}," 等指令操作文件。",{"type":27,"tag":35,"props":532,"children":534},{"id":533},"使用网页版-dosbox",[535],{"type":32,"value":536},"使用网页版 DOSBox",{"type":27,"tag":538,"props":539,"children":543},"link-card",{"icon":540,"link":541,"title":542},"https://dosasm.github.io/dosrun/favicon.ico","https://dosasm.github.io/dosrun/","Playground - An x86 assembly playGround in JSDos environment",[],{"type":27,"tag":28,"props":545,"children":546},{},[547,549,556],{"type":32,"value":548},"这个网站通过 js-dos 模拟 DOS 环境，提供了 DOS 编程练习功能，还附有一份 ",{"type":27,"tag":58,"props":550,"children":553},{"href":551,"rel":552},"https://dosasm.github.io/docs/tutorial-playGround/playGround",[62],[554],{"type":32,"value":555},"帮助文档",{"type":32,"value":557},"。网站托管在 GitHub Pages 上，有概率无法访问。",{"type":27,"tag":28,"props":559,"children":560},{},[561],{"type":32,"value":562},"你也可以在CO导航的“校友推荐”板块中找到这个网站。",{"type":27,"tag":538,"props":564,"children":568},{"icon":565,"link":566,"title":567},"https://cooo.site/favicon.ico","https://cooo.site/","CO导航 - 西邮导航服务",[],{"type":27,"tag":35,"props":570,"children":572},{"id":571},"在-vs-code-中使用-dosbox",[573],{"type":32,"value":574},"在 VS Code 中使用 DOSBox",{"type":27,"tag":42,"props":576,"children":577},{},[578,591,667],{"type":27,"tag":46,"props":579,"children":580},{},[581,583,590],{"type":32,"value":582},"在 VS Code 中安装 ",{"type":27,"tag":58,"props":584,"children":587},{"href":585,"rel":586},"https://marketplace.visualstudio.com/items?itemName=xsro.masm-tasm",[62],[588],{"type":32,"value":589},"MASM/TASM 插件",{"type":32,"value":336},{"type":27,"tag":46,"props":592,"children":593},{},[594,596],{"type":32,"value":595},"在扩展设置中，将“Masmtasm.ASM: Assembler（选择使用的汇编工具）”项更改为“MASM”。\n",{"type":27,"tag":42,"props":597,"children":598},{},[599],{"type":27,"tag":46,"props":600,"children":601},{},[602,604],{"type":32,"value":603},"也可以直接在配置文件中添加以下内容：\n",{"type":27,"tag":189,"props":605,"children":610},{"className":606,"code":607,"filename":608,"language":609,"meta":7,"style":7},"language-json shiki shiki-themes catppuccin-latte one-dark-pro","{\n  \"masmtasm.ASM.assembler\": \"MASM\",\n}\n","%APPDATA%/Code/User/settings.json","json",[611],{"type":27,"tag":83,"props":612,"children":613},{"__ignoreMap":7},[614,623,659],{"type":27,"tag":200,"props":615,"children":616},{"class":202,"line":203},[617],{"type":27,"tag":200,"props":618,"children":620},{"style":619},"--shiki-default:#7C7F93;--shiki-dark:#ABB2BF",[621],{"type":32,"value":622},"{\n",{"type":27,"tag":200,"props":624,"children":625},{"class":202,"line":225},[626,632,638,643,648,654],{"type":27,"tag":200,"props":627,"children":629},{"style":628},"--shiki-default:#7C7F93;--shiki-dark:#E06C75",[630],{"type":32,"value":631},"  \"",{"type":27,"tag":200,"props":633,"children":635},{"style":634},"--shiki-default:#1E66F5;--shiki-dark:#E06C75",[636],{"type":32,"value":637},"masmtasm.ASM.assembler",{"type":27,"tag":200,"props":639,"children":640},{"style":628},[641],{"type":32,"value":642},"\"",{"type":27,"tag":200,"props":644,"children":645},{"style":619},[646],{"type":32,"value":647},":",{"type":27,"tag":200,"props":649,"children":651},{"style":650},"--shiki-default:#40A02B;--shiki-dark:#98C379",[652],{"type":32,"value":653}," \"MASM\"",{"type":27,"tag":200,"props":655,"children":656},{"style":619},[657],{"type":32,"value":658},",\n",{"type":27,"tag":200,"props":660,"children":661},{"class":202,"line":428},[662],{"type":27,"tag":200,"props":663,"children":664},{"style":619},[665],{"type":32,"value":666},"}\n",{"type":27,"tag":46,"props":668,"children":669},{},[670,672,678],{"type":32,"value":671},"在 ",{"type":27,"tag":83,"props":673,"children":675},{"className":674},[],[676],{"type":32,"value":677},".asm",{"type":32,"value":679}," 文件的编辑界面右键，可以看到运行调试相关的选项。",{"type":27,"tag":28,"props":681,"children":682},{},[683,685,691],{"type":32,"value":684},"如果遇到问题，可以查看 ",{"type":27,"tag":58,"props":686,"children":689},{"href":687,"rel":688},"https://dosasm.github.io/docs/tutorial-masm-tasm/vsce-basic",[62],[690],{"type":32,"value":555},{"type":32,"value":336},{"type":27,"tag":693,"props":694,"children":695},"style",{},[696],{"type":32,"value":697},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":7,"searchDepth":437,"depth":437,"links":699},[700,706,707],{"id":37,"depth":225,"text":40,"children":701},[702],{"id":127,"depth":428,"text":127,"children":703},[704,705],{"id":166,"depth":437,"text":166},{"id":364,"depth":437,"text":364},{"id":533,"depth":225,"text":536},{"id":571,"depth":225,"text":574},"markdown","content:posts:2024:dosbox-setup.md","content","posts/2024/dosbox-setup.md","posts/2024/dosbox-setup","md","/posts",[716,721],{"_path":717,"title":718,"date":719,"type":720},"/2024/fake-today","今日有「假」","2024-05-03T04:22:31.000Z","story",{"_path":722,"title":723,"date":724},"/2024/css-sort","从 CSS 排序折腾到 Stylelint 和 pnpm","2024-05-21T14:44:44.000Z",1743389902134]