[{"data":1,"prerenderedAt":720},["ShallowReactive",2],{"/2023/tailscale-incomplete-guide":3,"surround-/2023/tailscale-incomplete-guide":711},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"updated":11,"image":12,"categories":13,"tags":15,"recommend":20,"readingTime":21,"body":26,"_type":704,"_id":705,"_source":706,"_file":707,"_stem":708,"_extension":709,"_original_dir":710},"/2023/tailscale-incomplete-guide","2023",false,"","Tailscale 不完全使用指南","Tailscale 搭建虚拟局域网，支持多设备间轻松实现 Windows 文件共享、SSH 访问、远程桌面及 Moonlight 游戏串流。","2023-10-08T02:34:00.000Z","2024-05-16T00:30:47.000Z","https://7.isyangs.cn/24/6664009cce512-24.jpg",[14],"经验分享",[16,17,18,19],"教程","tailscale","软件","远程",true,{"text":22,"minutes":23,"time":24,"words":25},"6 min read",5.69,341400,1138,{"type":27,"children":28,"toc":688},"root",[29,37,43,79,84,91,96,110,115,120,151,156,161,181,341,346,410,416,463,469,474,580,585,598,604,609,614,620,625,638,643,668,674,682],{"type":30,"tag":31,"props":32,"children":34},"element","h2",{"id":33},"介绍",[35],{"type":36,"value":33},"text",{"type":30,"tag":38,"props":39,"children":40},"p",{},[41],{"type":36,"value":42},"Tailscale是一款虚拟组网软件，它不需要公网IP地址，也不会像内网穿透软件过于依赖转发服务器的带宽，只需要安装、登录，你在Internet上的设备就会出现在同一局域网下。",{"type":30,"tag":44,"props":45,"children":46},"blockquote",{},[47,52],{"type":30,"tag":38,"props":48,"children":49},{},[50],{"type":36,"value":51},"工作原理：",{"type":30,"tag":53,"props":54,"children":55},"ul",{},[56,69],{"type":30,"tag":57,"props":58,"children":59},"li",{},[60],{"type":30,"tag":61,"props":62,"children":66},"a",{"href":63,"rel":64},"https://tailscale.com/blog/how-tailscale-works",[65],"nofollow",[67],{"type":36,"value":68},"How Tailscale works",{"type":30,"tag":57,"props":70,"children":71},{},[72],{"type":30,"tag":61,"props":73,"children":76},{"href":74,"rel":75},"https://tailscale.com/blog/how-nat-traversal-works",[65],[77],{"type":36,"value":78},"How NAT traversal works",{"type":30,"tag":38,"props":80,"children":81},{},[82],{"type":36,"value":83},"这篇教程挺不错的，可以阅读一下：",{"type":30,"tag":85,"props":86,"children":90},"link-card",{"icon":87,"link":88,"title":89},"https://wsrv.nl/?url=github.com/Ghost-chu.png","https://www.ghostchu.com/4200/tailscale-%e5%ae%89%e5%88%a9%e6%8c%87%e5%8d%97-%e5%bf%ab%e9%80%9f%e5%90%91%e4%bd%a0%e7%9a%84%e5%a5%bd%e5%8f%8b%e6%8e%a8%e9%94%80-tailscale/","Tailscale 安利指南 - 快速向你的好友推销 Tailscale",[],{"type":30,"tag":31,"props":92,"children":94},{"id":93},"安装",[95],{"type":36,"value":93},{"type":30,"tag":38,"props":97,"children":98},{},[99,101,108],{"type":36,"value":100},"打开",{"type":30,"tag":61,"props":102,"children":105},{"href":103,"rel":104},"https://tailscale.com/",[65],[106],{"type":36,"value":107},"Tailscale 官网",{"type":36,"value":109},"，推荐使用微软账号认证登录，随后给各个设备安装软件，然后在设备上登录，即可进入同一内网环境。",{"type":30,"tag":38,"props":111,"children":112},{},[113],{"type":36,"value":114},"Windows 在安装、登录之后建议在任务栏上右键图标，在“Preferences”菜单中选择“Run unattended”，即可开机自启。",{"type":30,"tag":31,"props":116,"children":118},{"id":117},"常用命令",[119],{"type":36,"value":117},{"type":30,"tag":53,"props":121,"children":122},{},[123,133,142],{"type":30,"tag":57,"props":124,"children":125},{},[126,128],{"type":36,"value":127},"检查Tailscale内网中到某主机的连通性，分为 DERP 中转和 IP 直连两种情况。\n",{"type":30,"tag":129,"props":130,"children":132},"copy",{"code":131},"tailscale ping \u003Chost>",[],{"type":30,"tag":57,"props":134,"children":135},{},[136,138],{"type":36,"value":137},"检查本机的网络环境。\n",{"type":30,"tag":129,"props":139,"children":141},{"code":140},"tailscale netcheck",[],{"type":30,"tag":57,"props":143,"children":144},{},[145,147],{"type":36,"value":146},"登录新账号，也可以把获取到的登录链接发给他人帮忙登录。\n",{"type":30,"tag":129,"props":148,"children":150},{"code":149},"tailscale login",[],{"type":30,"tag":31,"props":152,"children":154},{"id":153},"重启服务",[155],{"type":36,"value":153},{"type":30,"tag":38,"props":157,"children":158},{},[159],{"type":36,"value":160},"有时 Tailscale 的直连会中断，变为 DERP 中转模式，此模式下延迟较高，若想以直连方式重连目标机器，可以重启目标机器上的 Tailscale 服务。",{"type":30,"tag":38,"props":162,"children":163},{},[164,166,179],{"type":36,"value":165},"特别地，如果在 SSH 中重启服务，请注意 SSH 中断会导致重启失败，无法进行后续连接，所以需要另起一个与 SSH 无关的进程。Linux 中可以使用 ",{"type":30,"tag":167,"props":168,"children":171},"code",{"className":169,"language":170,"style":7},"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","sh",[172],{"type":30,"tag":173,"props":174,"children":176},"span",{"style":175},"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit",[177],{"type":36,"value":178},"screen",{"type":36,"value":180}," 命令，Windows 中可以执行这个脚本文件：",{"type":30,"tag":182,"props":183,"children":188},"pre",{"className":184,"code":185,"filename":186,"language":187,"meta":7,"style":7},"language-bat shiki shiki-themes catppuccin-latte one-dark-pro","%1 mshta vbscript:CreateObject(\"Shell.Application\").ShellExecute(\"cmd\",\"/c %~s0 ::\",\"\",\"runas\",1)(window.close) && exit\npowershell Invoke-WmiMethod Win32_Process Create \\\"powershell Restart-Service Tailscale\\\"\n","restart-tailscale.bat","bat",[189],{"type":30,"tag":167,"props":190,"children":191},{"__ignoreMap":7},[192,322],{"type":30,"tag":173,"props":193,"children":196},{"class":194,"line":195},"line",1,[197,203,209,215,221,227,232,237,241,246,251,256,260,265,270,274,279,283,288,292,296,301,306,310,316],{"type":30,"tag":173,"props":198,"children":200},{"style":199},"--shiki-default:#4C4F69;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic",[201],{"type":36,"value":202},"%",{"type":30,"tag":173,"props":204,"children":206},{"style":205},"--shiki-default:#E64553;--shiki-default-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic",[207],{"type":36,"value":208},"1",{"type":30,"tag":173,"props":210,"children":212},{"style":211},"--shiki-default:#4C4F69;--shiki-dark:#ABB2BF",[213],{"type":36,"value":214}," mshta vbscript:CreateObject",{"type":30,"tag":173,"props":216,"children":218},{"style":217},"--shiki-default:#7C7F93;--shiki-dark:#ABB2BF",[219],{"type":36,"value":220},"(",{"type":30,"tag":173,"props":222,"children":224},{"style":223},"--shiki-default:#40A02B;--shiki-dark:#98C379",[225],{"type":36,"value":226},"\"Shell.Application\"",{"type":30,"tag":173,"props":228,"children":229},{"style":217},[230],{"type":36,"value":231},")",{"type":30,"tag":173,"props":233,"children":234},{"style":211},[235],{"type":36,"value":236},".ShellExecute",{"type":30,"tag":173,"props":238,"children":239},{"style":217},[240],{"type":36,"value":220},{"type":30,"tag":173,"props":242,"children":243},{"style":223},[244],{"type":36,"value":245},"\"cmd\"",{"type":30,"tag":173,"props":247,"children":248},{"style":217},[249],{"type":36,"value":250},",",{"type":30,"tag":173,"props":252,"children":253},{"style":223},[254],{"type":36,"value":255},"\"/c ",{"type":30,"tag":173,"props":257,"children":258},{"style":199},[259],{"type":36,"value":202},{"type":30,"tag":173,"props":261,"children":262},{"style":205},[263],{"type":36,"value":264},"~s0",{"type":30,"tag":173,"props":266,"children":267},{"style":223},[268],{"type":36,"value":269}," ::\"",{"type":30,"tag":173,"props":271,"children":272},{"style":217},[273],{"type":36,"value":250},{"type":30,"tag":173,"props":275,"children":276},{"style":223},[277],{"type":36,"value":278},"\"\"",{"type":30,"tag":173,"props":280,"children":281},{"style":217},[282],{"type":36,"value":250},{"type":30,"tag":173,"props":284,"children":285},{"style":223},[286],{"type":36,"value":287},"\"runas\"",{"type":30,"tag":173,"props":289,"children":290},{"style":217},[291],{"type":36,"value":250},{"type":30,"tag":173,"props":293,"children":294},{"style":211},[295],{"type":36,"value":208},{"type":30,"tag":173,"props":297,"children":298},{"style":217},[299],{"type":36,"value":300},")(",{"type":30,"tag":173,"props":302,"children":303},{"style":211},[304],{"type":36,"value":305},"window.close",{"type":30,"tag":173,"props":307,"children":308},{"style":217},[309],{"type":36,"value":231},{"type":30,"tag":173,"props":311,"children":313},{"style":312},"--shiki-default:#179299;--shiki-dark:#ABB2BF",[314],{"type":36,"value":315}," &&",{"type":30,"tag":173,"props":317,"children":319},{"style":318},"--shiki-default:#8839EF;--shiki-dark:#C678DD",[320],{"type":36,"value":321}," exit\n",{"type":30,"tag":173,"props":323,"children":325},{"class":194,"line":324},2,[326,331,336],{"type":30,"tag":173,"props":327,"children":328},{"style":318},[329],{"type":36,"value":330},"powershell",{"type":30,"tag":173,"props":332,"children":333},{"style":211},[334],{"type":36,"value":335}," Invoke-WmiMethod Win32_Process Create \\",{"type":30,"tag":173,"props":337,"children":338},{"style":223},[339],{"type":36,"value":340},"\"powershell Restart-Service Tailscale\\\"\n",{"type":30,"tag":31,"props":342,"children":344},{"id":343},"传送文件",[345],{"type":36,"value":343},{"type":30,"tag":53,"props":347,"children":348},{},[349,367],{"type":30,"tag":57,"props":350,"children":351},{},[352,354],{"type":36,"value":353},"分享文件\n",{"type":30,"tag":53,"props":355,"children":356},{},[357,362],{"type":30,"tag":57,"props":358,"children":359},{},[360],{"type":36,"value":361},"电脑：右键文件，选择“Send with Tailscale...”，随后选择设备。",{"type":30,"tag":57,"props":363,"children":364},{},[365],{"type":36,"value":366},"手机：选择分享文件，选择“Tailscale”，随后选择设备。",{"type":30,"tag":57,"props":368,"children":369},{},[370,372],{"type":36,"value":371},"接收文件\n",{"type":30,"tag":53,"props":373,"children":374},{},[375,380],{"type":30,"tag":57,"props":376,"children":377},{},[378],{"type":36,"value":379},"文件会自动出现在接收设备的系统默认下载目录中。",{"type":30,"tag":57,"props":381,"children":382},{},[383,385,408],{"type":36,"value":384},"Linux 系统输入 ",{"type":30,"tag":167,"props":386,"children":387},{"className":169,"language":170,"style":7},[388,393,398,403],{"type":30,"tag":173,"props":389,"children":390},{"style":175},[391],{"type":36,"value":392},"sudo",{"type":30,"tag":173,"props":394,"children":395},{"style":223},[396],{"type":36,"value":397}," tailscale",{"type":30,"tag":173,"props":399,"children":400},{"style":223},[401],{"type":36,"value":402}," file",{"type":30,"tag":173,"props":404,"children":405},{"style":223},[406],{"type":36,"value":407}," get",{"type":36,"value":409}," 接收文件。",{"type":30,"tag":31,"props":411,"children":413},{"id":412},"windows-文件共享",[414],{"type":36,"value":415},"Windows 文件共享",{"type":30,"tag":53,"props":417,"children":418},{},[419,424,450],{"type":30,"tag":57,"props":420,"children":421},{},[422],{"type":36,"value":423},"在 Windows 设置中搜索“高级共享设置”，启用“文件和打印机共享”，关闭“密码保护的共享”。",{"type":30,"tag":57,"props":425,"children":426},{},[427,429],{"type":36,"value":428},"在需要共享的文件夹的属性设置中启用共享。\n",{"type":30,"tag":53,"props":430,"children":431},{},[432,437],{"type":30,"tag":57,"props":433,"children":434},{},[435],{"type":36,"value":436},"如果想让其他用户访问，则需要给对应的用户添加权限。",{"type":30,"tag":57,"props":438,"children":439},{},[440,442,448],{"type":36,"value":441},"如果想免登录访问/修改，则需要给 ",{"type":30,"tag":167,"props":443,"children":445},{"className":444},[],[446],{"type":36,"value":447},"Everyone",{"type":36,"value":449}," 用户添加相应权限。",{"type":30,"tag":57,"props":451,"children":452},{},[453,455,461],{"type":36,"value":454},"在文件资源管理器的地址栏输入 ",{"type":30,"tag":167,"props":456,"children":458},{"className":457},[],[459],{"type":36,"value":460},"\\\\主机名或者虚拟内网IP地址",{"type":36,"value":462},"，即可访问共享文件夹。",{"type":30,"tag":464,"props":465,"children":467},"h3",{"id":466},"使用适当的账号查看共享",[468],{"type":36,"value":466},{"type":30,"tag":38,"props":470,"children":471},{},[472],{"type":36,"value":473},"如果访问某些文件夹时，使用的账号没有对应的权限，则访问会被拒绝。你可以使用以下办法切换账号：",{"type":30,"tag":53,"props":475,"children":476},{},[477,526],{"type":30,"tag":57,"props":478,"children":479},{},[480,482],{"type":36,"value":481},"方法一：删除对应的Windows凭据\n",{"type":30,"tag":53,"props":483,"children":484},{},[485,490,521],{"type":30,"tag":57,"props":486,"children":487},{},[488],{"type":36,"value":489},"在开始菜单中搜索“凭据”，进入“控制面板\\用户帐户\\凭据管理器\\管理 Windows 凭据”。",{"type":30,"tag":57,"props":491,"children":492},{},[493,495,519],{"type":36,"value":494},"删除对应的用户账户，在命令行中输入 ",{"type":30,"tag":167,"props":496,"children":497},{"className":169,"language":170,"style":7},[498,503,508,513],{"type":30,"tag":173,"props":499,"children":500},{"style":175},[501],{"type":36,"value":502},"net",{"type":30,"tag":173,"props":504,"children":505},{"style":223},[506],{"type":36,"value":507}," use",{"type":30,"tag":173,"props":509,"children":510},{"style":223},[511],{"type":36,"value":512}," /d",{"type":30,"tag":173,"props":514,"children":516},{"style":515},"--shiki-default:#4C4F69;--shiki-dark:#E5C07B",[517],{"type":36,"value":518}," *",{"type":36,"value":520}," 断开共享文件夹连接。",{"type":30,"tag":57,"props":522,"children":523},{},[524],{"type":36,"value":525},"重新访问目标电脑的共享文件夹，应该会弹出登录窗口。",{"type":30,"tag":57,"props":527,"children":528},{},[529,531],{"type":36,"value":530},"方法二：通过映射网络驱动器切换账号\n",{"type":30,"tag":53,"props":532,"children":533},{},[534,560,565,570,575],{"type":30,"tag":57,"props":535,"children":536},{},[537,539,558],{"type":36,"value":538},"在命令行中输入 ",{"type":30,"tag":167,"props":540,"children":541},{"className":169,"language":170,"style":7},[542,546,550,554],{"type":30,"tag":173,"props":543,"children":544},{"style":175},[545],{"type":36,"value":502},{"type":30,"tag":173,"props":547,"children":548},{"style":223},[549],{"type":36,"value":507},{"type":30,"tag":173,"props":551,"children":552},{"style":223},[553],{"type":36,"value":512},{"type":30,"tag":173,"props":555,"children":556},{"style":515},[557],{"type":36,"value":518},{"type":36,"value":559},"，断开先前的共享文件夹连接。",{"type":30,"tag":57,"props":561,"children":562},{},[563],{"type":36,"value":564},"右键目标电脑的某一共享文件夹，选择“映射网络驱动器…”。",{"type":30,"tag":57,"props":566,"children":567},{},[568],{"type":36,"value":569},"勾选“使用其他凭据连接”，输入用户名、密码，勾选“记住我的凭据”。",{"type":30,"tag":57,"props":571,"children":572},{},[573],{"type":36,"value":574},"在文件资源管理器左侧树形导航（或者“此电脑”）中右键刚刚映射的网络驱动器，选择“断开连接”。",{"type":30,"tag":57,"props":576,"children":577},{},[578],{"type":36,"value":579},"重新访问目标电脑的共享文件夹，应该会自动使用新用户登录。",{"type":30,"tag":464,"props":581,"children":583},{"id":582},"在移动端访问",[584],{"type":36,"value":582},{"type":30,"tag":38,"props":586,"children":587},{},[588,590,596],{"type":36,"value":589},"可以使用猫头鹰文件、MixExplorer、VLC 等软件，它们都支持 SMB 协议访问共享文件夹。你可以参考 ",{"type":30,"tag":61,"props":591,"children":593},{"href":592},"/2024/link-util",[594],{"type":36,"value":595},"电脑连接手机，手机给电脑传文件……",{"type":36,"value":597},"。",{"type":30,"tag":31,"props":599,"children":601},{"id":600},"windows-openssh",[602],{"type":36,"value":603},"Windows OpenSSH",{"type":30,"tag":38,"props":605,"children":606},{},[607],{"type":36,"value":608},"在Windows设置中选择“应用-可选功能-添加可选功能-查看功能”，找到“OpenSSH 服务器”，安装。",{"type":30,"tag":38,"props":610,"children":611},{},[612],{"type":36,"value":613},"在开始菜单中搜索“服务”并打开，找到“OpenSSH SSH Server”，双击，启动类型选择“自动”，并且点击“启动”按钮。",{"type":30,"tag":31,"props":615,"children":617},{"id":616},"windows-远程桌面",[618],{"type":36,"value":619},"Windows 远程桌面",{"type":30,"tag":38,"props":621,"children":622},{},[623],{"type":36,"value":624},"远程桌面需要Windows专业版及以上的版本，如果是家庭版系统的话：",{"type":30,"tag":53,"props":626,"children":627},{},[628,633],{"type":30,"tag":57,"props":629,"children":630},{},[631],{"type":36,"value":632},"可以挂载专业版的安装镜像，然后选择保留数据升级。",{"type":30,"tag":57,"props":634,"children":635},{},[636],{"type":36,"value":637},"可以使用 RDPWarp、SuperRDP2 之类的软件开启远程桌面服务。",{"type":30,"tag":38,"props":639,"children":640},{},[641],{"type":36,"value":642},"在“Windows 设置-系统-远程桌面”中启用远程连接。",{"type":30,"tag":38,"props":644,"children":645},{},[646,648,654,656,666],{"type":36,"value":647},"随后可以在客户端按下 ",{"type":30,"tag":167,"props":649,"children":651},{"className":650},[],[652],{"type":36,"value":653},"Win+R",{"type":36,"value":655},"，输入 ",{"type":30,"tag":167,"props":657,"children":660},{"className":658,"language":659,"style":7},"language-cmd shiki shiki-themes catppuccin-latte one-dark-pro","cmd",[661],{"type":30,"tag":173,"props":662,"children":663},{"style":211},[664],{"type":36,"value":665},"mstsc",{"type":36,"value":667},"，然后连接到主机名或者虚拟内网IP地址了。",{"type":30,"tag":31,"props":669,"children":671},{"id":670},"moonlight-串流",[672],{"type":36,"value":673},"Moonlight 串流",{"type":30,"tag":675,"props":676,"children":681},"link-banner",{"banner":677,"description":678,"link":679,"title":680},"https://7.isyangs.cn/24/6664009b8f999-24.jpg","服务端Sunshine设置、客户端分辨率调整、隐私屏功能实现及触摸优化。","/2024/moonlight-streaming-guide","Moonlight 串流指南",[],{"type":30,"tag":683,"props":684,"children":685},"style",{},[686],{"type":36,"value":687},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":7,"searchDepth":689,"depth":689,"links":690},4,[691,692,693,694,695,696,701,702,703],{"id":33,"depth":324,"text":33},{"id":93,"depth":324,"text":93},{"id":117,"depth":324,"text":117},{"id":153,"depth":324,"text":153},{"id":343,"depth":324,"text":343},{"id":412,"depth":324,"text":415,"children":697},[698,700],{"id":466,"depth":699,"text":466},3,{"id":582,"depth":699,"text":582},{"id":600,"depth":324,"text":603},{"id":616,"depth":324,"text":619},{"id":670,"depth":324,"text":673},"markdown","content:posts:2023:tailscale-incomplete-guide.md","content","posts/2023/tailscale-incomplete-guide.md","posts/2023/tailscale-incomplete-guide","md","/posts",[712,716],{"_path":713,"title":714,"date":715},"/2023/windows-setup-guide","Windows 安装指南","2023-09-24T04:00:00.000Z",{"_path":717,"title":718,"date":719},"/2023/termux-guide","Termux 简单指南","2023-11-13T13:50:08.000Z",1743389900209]