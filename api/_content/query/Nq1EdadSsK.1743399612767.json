{"_path":"/2024/dosbox-setup","_dir":"2024","_draft":false,"_partial":false,"_locale":"","title":"使用 DOSBox 的多种方式","description":"DOSBox 放大画面、自动挂载、网页版和 VS Code 插件。","date":"2024-05-11T08:05:40.000Z","updated":"2024-05-30T08:42:29.000Z","categories":["经验分享"],"tags":["教程","软件","DOSBox"],"readingTime":{"text":"4 min read","minutes":3.96,"time":237600,"words":792},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"学校开展了计算机科学导论、微型计算机原理与接口技术相关课程，要求学生使用 DOSBox 模拟 DOS 环境进行汇编。但网上看到的教程不全，遂撰写此文。"}]},{"type":"element","tag":"h2","props":{"id":"在-windows-上安装-dosbox"},"children":[{"type":"text","value":"在 Windows 上安装 DOSBox"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"下载 DOSBox 并安装。\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.dosbox.com/download.php#:~:text=Windows","rel":["nofollow"]},"children":[{"type":"text","value":"官网下载"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果你电脑具有较好的国际互联网接入环境，可以通过 WinGet 一键安装。\n"},{"type":"element","tag":"copy","props":{"code":"winget install dosbox","prompt":"PS>"},"children":[]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在以下地址之一下载 MASM 套件，解压到 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"D:\\Software\\MASM"}]},{"type":"text","value":"。\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/dosasm/dosrun/tree/main/bundles/src/MASM-v5.00/masm","rel":["nofollow"]},"children":[{"type":"text","value":"dosasm/dosrun MASM-v5.00"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/dosasm/dosrun/tree/main/bundles/src/MASM-v6.11/masm","rel":["nofollow"]},"children":[{"type":"text","value":"dosasm/dosrun MASM-v6.11"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/froginwell/assembly/tree/master/software","rel":["nofollow"]},"children":[{"type":"text","value":"froginwell/assembly"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"优化体验"},"children":[{"type":"text","value":"优化体验"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用以下方式之一打开配置文件，版本号可能有所不同："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在开始菜单中搜索“DOSBox 0.74-3 Options”打开。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在“开始菜单>所有应用>DOSBox 0.74-3”中找到“DOSBox 0.74-3 Options”打开。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"copy","props":{"code":"notepad %LocalAppData%\\DOSBox\\dosbox-0.74-3.conf","prompt":"CMD>"},"children":[]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"copy","props":{"code":"code $env:LOCALAPPDATA\\DOSBox\\dosbox-0.74-3.conf","prompt":"PS>"},"children":[]}]}]},{"type":"element","tag":"h4","props":{"id":"修改显示大小"},"children":[{"type":"text","value":"修改显示大小"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Alt-Enter 组合键可以切换全屏和窗口模式，但是全屏后任何焦点变化（打开开始菜单、切换窗口）都会导致退出全屏。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"切换全屏和窗口模式时，会伴有屏幕分辨率切换，会短暂黑屏几秒，并且其他窗口大小会受到影响（未最大化的窗口缩小到640*400，即受到全屏时的分辨率限制）。因此建议通过修改配置文件来避免使用全屏模式。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"找到配置文件开头的这两行："}]},{"type":"element","tag":"pre","props":{"className":"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","code":"windowresolution=original\noutput=surface\n","filename":"doxbox-0.74-3.conf","language":"ini","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-dark:#C678DD"},"children":[{"type":"text","value":"windowresolution"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#179299;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"original\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-dark:#C678DD"},"children":[{"type":"text","value":"output"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#179299;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"surface\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"想要放大画面，可以修改 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"windowresolution"}]},{"type":"text","value":" 为以下值：\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","language":"ini","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"1280x800"}]}]},{"type":"text","value":"（2倍）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","language":"ini","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"960x600"}]}]},{"type":"text","value":"（1.5倍）"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果修改了 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"windowresolution"}]},{"type":"text","value":"，"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"output"}]},{"type":"text","value":" 方式也要修改。\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"网上的多数教程都改成了 "},{"type":"element","tag":"code","props":{"className":"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","language":"ini","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"opengl"}]}]},{"type":"text","value":"，这种方式会导致"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"缩放模糊"}]},{"type":"text","value":"。并且多数学生使用的笔记本同时具有核显和独显，OpenGL 引擎启动时会调用独立显卡，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"增加耗电"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在这里，本人推荐改成 "},{"type":"element","tag":"code","props":{"className":"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","language":"ini","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"overlay"}]}]},{"type":"text","value":" 或者 "},{"type":"element","tag":"code","props":{"className":"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","language":"ini","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"ddraw"}]}]},{"type":"text","value":"，这些输出方式使用临近（Nearest）缩放算法，字体边缘更清晰，不会出现模糊。"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"自动挂载"},"children":[{"type":"text","value":"自动挂载"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在配置文件末尾，"},{"type":"element","tag":"code","props":{"className":"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","language":"ini","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#61AFEF"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DF8E1D;--shiki-dark:#61AFEF"},"children":[{"type":"text","value":"autoexec"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#61AFEF"},"children":[{"type":"text","value":"]"}]}]},{"type":"text","value":" 一节下添加以下内容，参数中的文件夹路径可以随自己喜好修改："}]},{"type":"element","tag":"pre","props":{"className":"language-ini shiki shiki-themes catppuccin-latte one-dark-pro","code":"[autoexec]\n# 将 Windows 系统 D:\\Software\\MASM 文件夹挂载到 DOS 虚拟磁盘 C:\nMOUNT C D:\\Software\\MASM\n# 设置 C: 为 PATH，使得 MASM 文件夹中的程序在任何目录下都可调用\nSET PATH=C:\n# 将【已经创建的】本地代码目录挂载到 DOS 虚拟磁盘 D:\nMOUNT D D:\\CodeXUPT\\Assembly\n# 切换到 D:\nD:\n","filename":"doxbox-0.74-3.conf","language":"ini","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#61AFEF"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DF8E1D;--shiki-dark:#61AFEF"},"children":[{"type":"text","value":"autoexec"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#61AFEF"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CA0B0;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# 将 Windows 系统 D:\\Software\\MASM 文件夹挂载到 DOS 虚拟磁盘 C:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"MOUNT C D:\\Software\\MASM\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CA0B0;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# 设置 C: 为 PATH，使得 MASM 文件夹中的程序在任何目录下都可调用\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"SET "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-dark:#C678DD"},"children":[{"type":"text","value":"PATH"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#179299;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"C:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CA0B0;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# 将【已经创建的】本地代码目录挂载到 DOS 虚拟磁盘 D:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"MOUNT D D:\\CodeXUPT\\Assembly\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CA0B0;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"# 切换到 D:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#98C379"},"children":[{"type":"text","value":"D:\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样，启动 DOSBox 后，就会自动挂载 MASM 文件夹和代码文件夹。并且可以在代码目录下，直接通过 "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"masm"}]}]},{"type":"text","value":" "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"debug"}]}]},{"type":"text","value":" 等指令操作文件。"}]},{"type":"element","tag":"h2","props":{"id":"使用网页版-dosbox"},"children":[{"type":"text","value":"使用网页版 DOSBox"}]},{"type":"element","tag":"link-card","props":{"icon":"https://dosasm.github.io/dosrun/favicon.ico","link":"https://dosasm.github.io/dosrun/","title":"Playground - An x86 assembly playGround in JSDos environment"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个网站通过 js-dos 模拟 DOS 环境，提供了 DOS 编程练习功能，还附有一份 "},{"type":"element","tag":"a","props":{"href":"https://dosasm.github.io/docs/tutorial-playGround/playGround","rel":["nofollow"]},"children":[{"type":"text","value":"帮助文档"}]},{"type":"text","value":"。网站托管在 GitHub Pages 上，有概率无法访问。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"你也可以在CO导航的“校友推荐”板块中找到这个网站。"}]},{"type":"element","tag":"link-card","props":{"icon":"https://cooo.site/favicon.ico","link":"https://cooo.site/","title":"CO导航 - 西邮导航服务"},"children":[]},{"type":"element","tag":"h2","props":{"id":"在-vs-code-中使用-dosbox"},"children":[{"type":"text","value":"在 VS Code 中使用 DOSBox"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 VS Code 中安装 "},{"type":"element","tag":"a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=xsro.masm-tasm","rel":["nofollow"]},"children":[{"type":"text","value":"MASM/TASM 插件"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在扩展设置中，将“Masmtasm.ASM: Assembler（选择使用的汇编工具）”项更改为“MASM”。\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"也可以直接在配置文件中添加以下内容：\n"},{"type":"element","tag":"pre","props":{"className":"language-json shiki shiki-themes catppuccin-latte one-dark-pro","code":"{\n  \"masmtasm.ASM.assembler\": \"MASM\",\n}\n","filename":"%APPDATA%/Code/User/settings.json","language":"json","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#E06C75"},"children":[{"type":"text","value":"  \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-dark:#E06C75"},"children":[{"type":"text","value":"masmtasm.ASM.assembler"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#E06C75"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" \"MASM\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":"}\n"}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".asm"}]},{"type":"text","value":" 文件的编辑界面右键，可以看到运行调试相关的选项。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果遇到问题，可以查看 "},{"type":"element","tag":"a","props":{"href":"https://dosasm.github.io/docs/tutorial-masm-tasm/vsce-basic","rel":["nofollow"]},"children":[{"type":"text","value":"帮助文档"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":4,"depth":4,"links":[{"id":"在-windows-上安装-dosbox","depth":2,"text":"在 Windows 上安装 DOSBox","children":[{"id":"优化体验","depth":3,"text":"优化体验","children":[{"id":"修改显示大小","depth":4,"text":"修改显示大小"},{"id":"自动挂载","depth":4,"text":"自动挂载"}]}]},{"id":"使用网页版-dosbox","depth":2,"text":"使用网页版 DOSBox"},{"id":"在-vs-code-中使用-dosbox","depth":2,"text":"在 VS Code 中使用 DOSBox"}]}},"_type":"markdown","_id":"content:posts:2024:dosbox-setup.md","_source":"content","_file":"posts/2024/dosbox-setup.md","_stem":"posts/2024/dosbox-setup","_extension":"md","_original_dir":"/posts"}