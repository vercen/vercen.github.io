{"_path":"/2024/all-pits-stepped","_dir":"2024","_draft":false,"_partial":false,"_locale":"","title":"从“端口无法访问”到本地环境问题——朋友的博客踩坑记录","description":"M 来找我帮忙，从服务器搭建博客到本地 Windows 环境问题，他把坑几乎全踩了一遍。少配少错。可他博客至今空空如也，所以我发出完整踩坑过程，希望能帮助到更多人。","date":"2024-07-24T13:20:57.000Z","updated":"2024-08-03T02:23:46.000Z","image":"https://7.isyangs.cn/24/67211d6517aa3-24.webp","type":"story","categories":["生活"],"tags":["博客","问题"],"readingTime":{"text":"21 min read","minutes":20.525,"time":1231500,"words":4105},"body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在决心踏入计算机的世界之后，我们总会勇敢踏步，朝着某个方向走去。也许那里是堵墙，也许墙上贴着前辈们的经验，只要有怀揣一颗热爱探索的心，总归能找到答案。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在发现属于自己的答案之前，没有一帆风顺的路。"}]}]},{"type":"element","tag":"poetry","props":{"author":"纸鹿","footer":"2024.7.24","title":"章回体tl;dr展身手，从云上修到PE终得解决"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"微信收消息被问「在吗」，约定时间解决服务器问题\n在现场先整理环境，细心排查终现端倪\n说公网 IP 端口无法访问，实际是 Hexo 生成空页面\n问意图是想搭建博客，随后推荐国外静态部署"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"npm 装包报权限问题，缓存文件夹需管理权限读写\n更改缓存文件夹权限，全局包文件夹也有问题\nWinGet 重装 Node.js，Win 11 未更新无此命令\n下载目录无 Node 安装包，迅雷里找到得以安装\n设置镜像源npm依旧慢，换pnpm遇中文路径乱码"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"家庭版无「用户和组管理」，难启用内置 Administrator\n试直接新建管理员账户，改注册表键值继续下一步\n改路径提示文件夹占用，准备进入 PE 修改\n忽发觉 BitLocker 启用，上微软网站查恢复密钥\n查微软账户无恢复密钥，关设备加密防硬盘锁死\n进 BIOS 关安全启动，进PE改名顺扩容 C 盘\nC/D 盘间隔 Ubuntu 系统，D 盘空间分不到 C 盘\n进系统改环境变量，却发现大量路径零碎片段"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"国内服务器没有备案，本地整好换静态部署\nGitHub 邮箱不公开，本地仓库无法 push\n身份证件没在手边，不好注册 Netlify 账户\nCF Pages部署静态博客，@ 解析尚需迁移 DNS\n迁dns后成功部署，一杯奶茶聊表谢意\n约定聚餐只得暂时离开，火速吃完回来再续鏖战\n教授 Git 三步流程，总结经验然后离开"}]}]},{"type":"element","tag":"h2","props":{"id":"问题与推论之间模糊的界限"},"children":[{"type":"text","value":"问题与推论之间模糊的界限"}]},{"type":"element","tag":"h3","props":{"id":"在吗起手"},"children":[{"type":"text","value":"「在吗」起手"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"M 给我发了一条微信，询问我「在吗」。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我在，我在暑期留校，我在食堂为数不多开放的档口等还算能吃的饭。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"M 讲「公网 IP + 端口号无法访问」。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我的脑海中冒出许多种想法：「会不会是家庭宽带想要从公网访问」「会不会是服务器防火墙没有放行端口」「会不会是自己写的服务没有侦听所有网卡」「会不会是低位端口在路途中被拦截了」……"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我问了一连串问题。「哪里来的公网 IP？」「什么类型的服务？」「SSH 能否连接？」"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"「哪里来的公网 IP」：判断是否真的拿到了公网 IP。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"「什么类型的服务」：判断是成品引擎还算自己写的后端代码。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"「SSH 能否连接」：判断IP上的其他端口能否连接。"}]}]}]},{"type":"element","tag":"h3","props":{"id":"弄清问题"},"children":[{"type":"text","value":"弄清问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"起到关键作用的是后来 M 发来一张宝塔面板的截图。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"谢天谢地，我终于弄明白他讲的问题是「服务器上通过宝塔面板搭建的网站无法访问」了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我问「访问报什么错」。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"他讲「直接无法访问」。天哪。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"几句聊天之后，饭已经好了。先吃饭吧。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在饭送进嘴边之前，我认真思考了一下，和 M 约定下午亲自找他看看，不然可能说不清、可能修不好、可能造成一些破坏性的影响。"}]},{"type":"element","tag":"h3","props":{"id":"清理环境"},"children":[{"type":"text","value":"清理环境"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"中午睡醒已经是两点多了，下午解决完手里部分要紧的事情已经是三点半了。我给 M 发了消息，前往几十步路之远的他所在的实验室。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"M 把他的工位让给我，我坚持让他搬一张椅子坐下，而不是站在旁边。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"电脑开了很多窗口。浏览器里有很多标签页。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我用 Windows 的虚拟桌面功能，把问题相关的窗口和标签页放在新桌面里。"}]},{"type":"element","tag":"h3","props":{"id":"错误推论"},"children":[{"type":"text","value":"错误推论"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我先照着 M 的思路，检查了公网 IP、服务商提供的防火墙、宝塔面板内的防火墙，最后才打开了那个「无法访问」的服务器上的公网 IP 的 80 端口。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"访问网址，我的面色有些许变化。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「你看，你说的这个公网 IP + 端口真的无法访问吗？」我问。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「是啊，就这样打不开。」他答。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"纯白色的画面映照着我的脸，屏幕上没有任何报错信息。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「端口是通的，这个网页已经加载好了，」我这样讲，「是你给 Nginx 提供的首页是空的，而不是无法访问。」"}]},{"type":"element","tag":"h2","props":{"id":"表面问题与实际意图的距离"},"children":[{"type":"text","value":"表面问题与实际意图的距离"}]},{"type":"element","tag":"h3","props":{"id":"问题环境"},"children":[{"type":"text","value":"问题环境"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我快速扫视服务器。同时简单问了一些信息。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ubuntu 系统。实例名叫 Windows Server。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"没有配置 SSH。宝塔面板的终端功能不能使用。通过服务商提供的网页终端执行命令。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"国内服务器，没有备案。有域名。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"宝塔面板的 Nginx 提示未安装。怪事。"}]},{"type":"element","tag":"h3","props":{"id":"真正需求"},"children":[{"type":"text","value":"真正需求"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"他想搭博客。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"搭博客起步阶段不用买服务器，使用静态托管服务即可。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"博客不像是抖音爆款视频，缺乏服务器续费支持或长期内容输出，很难让自己或他人获益。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所以选择静态部署服务吧，既能防止续费困难而使得热爱更新的博客蒙尘，也能简化流程，让尝鲜选手快速吃上自建博客的体验。"}]},{"type":"element","tag":"h2","props":{"id":"本地开发环境有些许-messy"},"children":[{"type":"text","value":"本地开发环境有些许 messy"}]},{"type":"element","tag":"h3","props":{"id":"博客本体"},"children":[{"type":"text","value":"博客本体"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个博客文件夹没有初始化为 Git 仓库，使用 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hexo-deployer-git"}]},{"type":"text","value":" 将生成的静态页面部署到 GitHub 仓库。博客主题文件夹使用 "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" clone"}]}]},{"type":"text","value":" 命令克隆，这样做有几个问题："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"博客源文件未部署到 GitHub，容易丢失。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"更改内容后不仅需要 "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" commit"}]}]},{"type":"text","value":"，还需要执行 "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"hexo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" deploy"}]}]},{"type":"text","value":" 命令。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"未使用 Git submodule 管理主题文件夹，不好使用在线部署功能。"}]}]},{"type":"element","tag":"h3","props":{"id":"npm-环境"},"children":[{"type":"text","value":"npm 环境"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在使用 npm 管理包的过程中，我留意到更新项目依赖的过程中报 EPERM 错误，经检查是普通用户没有写入 npm 缓存文件夹的权限。这种情况一般是有软件安装到分区根目录，导致全盘读写权限被修改。不过他的情况并非如此，而是照着网上的教程，使用管理员权限的命令行配置了全局包、缓存路径，不配还好，这一配，就是环境问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「对，因为 C 盘空间有点小。」他讲。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"修改了全局包和缓存文件夹的权限后，安装包不报错了。不过明明他配置过 npmmirror 镜像源，但是下载依赖的速度特别慢。查不出原因，索性重装 Node.js 环境吧。"}]},{"type":"element","tag":"pre","props":{"className":"language-powershell shiki shiki-themes catppuccin-latte one-dark-pro","code":"winget remove nodejs\n","language":"powershell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4C4F69;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":"winget remove nodejs\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"🥺又报错了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这台电脑虽然是 Windows 11，但是已经很久没更新了，不支持软件包安装程序提供的 winget 命令。从系统设置卸载吧。"}]},{"type":"element","tag":"h3","props":{"id":"环境蓄力中"},"children":[{"type":"text","value":"环境蓄力中"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"折腾一番，准备重装 Node.js，听闻 Node.js 是最近才安装的，想必安装包还在本地，兜兜转转找一圈没找到。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「安装包在迅雷里。」他讲。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装之后，由于 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"~/.npmrc"}]},{"type":"text","value":" 配置文件或是其他什么配置文件还在，下载慢的问题依旧，我也懒得换源了，直接用 pnpm 管理依赖吧。"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","code":"npm install -g pnpm\npnpm setup\npnpm add -g pnpm\nnpm remove -g npm\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#D19A66"},"children":[{"type":"text","value":" -g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" pnpm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" setup\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#D19A66"},"children":[{"type":"text","value":" -g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" pnpm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" remove"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#D19A66"},"children":[{"type":"text","value":" -g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" npm\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可惜是用户文件夹名称是中文，pnpm 无法正常配置，路径变成了乱码。"}]},{"type":"element","tag":"h2","props":{"id":"从服务器修到电脑本体"},"children":[{"type":"text","value":"从服务器修到电脑本体"}]},{"type":"element","tag":"h3","props":{"id":"中文用户文件夹名"},"children":[{"type":"text","value":"中文用户文件夹名"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「欸，这个刚装电脑不久就发现了，但是我一直不会改。」他继续讲。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「淘宝搜索“用户名中文改英文”，五到十块钱就能搞定。」我答，「既然遇到问题了，那就顺便改一下吧。」"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当然，我也是当场上网查找的 "},{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/songxunwen/article/details/121175952","rel":["nofollow"]},"children":[{"type":"text","value":"修改教程"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"得，又报错了，家庭版没有管理选项。为了减少对环境的影响，也为了避免扩大环境维护的范围，我并未将家庭版系统升级到专业版。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"内置的 Administrator 不好启用，我索性断网（为了新建离线账户）新建了另一个管理员账户。"}]},{"type":"element","tag":"h3","props":{"id":"切换账户依然占用"},"children":[{"type":"text","value":"切换账户依然占用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"切换账户后，我在注册表里找到并修改了原用户的用户文件夹路径配置，对应修改文件夹名的时候发现文件夹被占用，在任务管理器里关闭了几个可疑进程后问题依旧。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"没事，还能救。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"只要从 U 盘启动 PE 系统，就可以直接修改用户文件夹名了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"穿过几个走廊，我从自己工位取出了 U 盘。它安装了 Ventoy，带有 PE、Windows 和 Linux 的安装镜像。它又要出山了。"}]},{"type":"element","tag":"h3","props":{"id":"盘符图标上的小锁"},"children":[{"type":"text","value":"盘符图标上的小锁"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在重启到 PE 之前，需要做好完全准备——比如，解决掉分区图标上代表 BitLocker 的小锁，起码确保知道恢复密钥。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"说起这个锁，来头可就大了：不少用户在不知情的情况下变动分区，触发了 BitLocker 安全机制，开机显示「输入恢复密钥以进行恢复」的提示。有的按照提示找到了恢复密钥，进入了系统；有的微软账户里并未同步 BitLocker 密钥，便永远地失去了电脑内的所有数据。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我喊 M 在手机上先行登录微软账户网站，检查恢复密钥。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"M 的账户里没有 BitLocker 密钥。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还好先行查看了，不然如果一会触发了 BitLocker 的话要出大问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在“设备加密”设置里关闭了开关，看着解密进度条一点一点推进，我心力交瘁地瘫在 M 的工位上。"}]},{"type":"element","tag":"h3","props":{"id":"pe-启动"},"children":[{"type":"text","value":"PE 启动"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「来杯奶茶吧，想喝什么？」M 问。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「豆乳玉麒麟不错，怎样？」M 继续问。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我又陷入久远的沉思了。之前喝过一杯豆乳玉麒麟，也是帮人解决电脑问题的酬劳。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"等设备加密完全关闭以后，我重启进入 BIOS 关闭了安全启动，又进入 U 盘启动 PE 系统，改好了文件夹名。"}]},{"type":"element","tag":"h3","props":{"id":"分区栓"},"children":[{"type":"text","value":"分区「栓」"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「我看不少软件被手动移到 D 盘了，所以顺便给 C 盘扩个容吧，把 D 盘空间分给 C 盘，有助于减少使用者的空间焦虑。」边操作着，我的动作停滞了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C 盘和 D 盘之间横亘着一个 S: 分区、Ubuntu 的 ESP 分区、Ext4 格式的根目录分区、家目录分区。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我心里默算了一下，C 盘和这几个分区的大小加起来，刚好是 200 GB。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"经过询问和检查，S 盘并没有什么重要内容，迁移一部分文件到 D 盘后，便把 S 盘的十几 G 空间归还给 C 盘了。"}]},{"type":"element","tag":"h3","props":{"id":"path-被分解"},"children":[{"type":"text","value":"PATH 被分解"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"重启后，观感正常，删除之前临时新建的管理员账户。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"根据教程，检查环境变量里残余的旧用户名。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"再次发现情况：PATH 里原中文用户名的部分是乱码，并且出现了多个意外的分号将原先的单个路径断成多个路径。情况新到我没有见过，也在网上搜不到类似现象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"稍微收拾一下吧，npm 不知道什么问题下载慢，但 pnpm 应该算能用了。"}]},{"type":"element","tag":"h2","props":{"id":"为了丝滑部署博客也是煞费苦心"},"children":[{"type":"text","value":"为了丝滑部署博客也是煞费苦心"}]},{"type":"element","tag":"h3","props":{"id":"部署博客的核心要点"},"children":[{"type":"text","value":"部署博客的核心要点"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"把奶盖和黄豆粉倒入奶茶，轻轻摇匀，小口啜饮。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以开始优雅的博客部署环节了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"pnpm 下载包的体验十分顺畅，丝毫没有先前 npm 的凝滞感。"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","code":"pnpm install -g hexo-cli\npnpm update --save\nhexo cl; hexo s\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#D19A66"},"children":[{"type":"text","value":" -g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" hexo-cli\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" update"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#D19A66"},"children":[{"type":"text","value":" --save\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"hexo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" cl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7C7F93;--shiki-dark:#ABB2BF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":" hexo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" s\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本地运行博客的观感正常。"}]},{"type":"element","tag":"h3","props":{"id":"git-submodule-的轻松实践"},"children":[{"type":"text","value":"Git submodule 的轻松实践"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"删除通过 "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" clone"}]}]},{"type":"text","value":" 克隆的原主题文件夹，再通过 Git submodule 添加主题。这样便可以之间在 Git Push 时云 build，而不用 "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"hexo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" deploy"}]}]},{"type":"text","value":"。命令比较强劲，审慎使用，确保做好备份。"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","code":"git rm -f --cached themes/主题文件夹\ngit submodule add 主题git地址 themes/主题文件夹\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" rm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#D19A66"},"children":[{"type":"text","value":" -f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#D19A66"},"children":[{"type":"text","value":" --cached"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" themes/主题文件夹\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" submodule"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" 主题git地址"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" themes/主题文件夹\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以推送了。"}]},{"type":"element","tag":"h3","props":{"id":"阻止推送"},"children":[{"type":"text","value":"阻止推送"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"奶茶中的冰已经失去了硬朗的外形。终端里留着 Git 推送被阻止的信息。好一个丝滑未半而中道遇阻啊。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"经检查，M 在 GitHub 设置中启用了"},{"type":"element","tag":"a","props":{"href":"https://docs.github.com/zh/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/blocking-command-line-pushes-that-expose-your-personal-email-address","rel":["nofollow"]},"children":[{"type":"text","value":"阻止会暴露个人电子邮件地址的命令行推送"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我关掉这个选项，试图让博客部署重新顺畅起来。"}]},{"type":"element","tag":"h3","props":{"id":"选择静态部署服务"},"children":[{"type":"text","value":"选择静态部署服务"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我又喝了一口豆乳玉麒麟，豆乳玉麒麟的口感很丝滑，不愧是热门产品。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「有身份证、学生证或者驾驶证吗？GitHub 有没有绑定 QQ 邮箱之外的邮箱？」我问。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"得到否定的答案，严格注册风控 Netlify 便不可选了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我带他注册了 Cloudflare 账号，验证了邮箱。在 Pages 服务页面绑定了 GitHub 仓库，填写好了部署命令和输出目录。绑定了域名。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"天哪，又卡住了。主域名（"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@"}]},{"type":"text","value":"）使用 Cloudflare Pages 服务时，需要使用 Cloudflare 的 DNS 服务器。"}]},{"type":"element","tag":"h3","props":{"id":"迁移-dns"},"children":[{"type":"text","value":"迁移 DNS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"奶茶喝得太快，胃里感到了些许凉意。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"打开腾讯云。扫码登录。查看域名。修改域名的 DNS 服务器。再次扫码验明身份。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 Cloudflare 设置好解析记录，差不多算是完成了。"}]},{"type":"element","tag":"h3","props":{"id":"小炒菜"},"children":[{"type":"text","value":"小炒菜"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"进度比预想中的慢了不少，之前和另外几个朋友约好一起拼的小炒菜到了。暂时和 M 分别一会，他还想听一听博客后续如何推送更新。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"托着盒饭就着菜，我吃完了米饭。提上豆乳玉麒麟继续找 M 了。"}]},{"type":"element","tag":"h3","props":{"id":"git-三部曲"},"children":[{"type":"text","value":"Git 三部曲"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"简短地，我告诉他："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"写博客文章，保存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果修改配置需要参阅主题文档，修改后执行 "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"hexo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" cl"}]}]},{"type":"text","value":" 清除缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通过 "},{"type":"element","tag":"code","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","language":"sh","style":""},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"hexo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" s"}]}]},{"type":"text","value":" 在本地预览"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通过「Git 三部曲」提交到 GitHub，触发云端博客更新\n"},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes catppuccin-latte one-dark-pro","code":"git add .\ngit commit -m \"提交信息\"\ngit push\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" .\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" commit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#D19A66"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" \"提交信息\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#1E66F5;--shiki-default-font-style:italic;--shiki-dark:#61AFEF;--shiki-dark-font-style:inherit"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#40A02B;--shiki-dark:#98C379"},"children":[{"type":"text","value":" push\n"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我演示了一遍，M 自己也做了一遍。会了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我把仅剩几块冰的奶茶留在了他的垃圾袋里。"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"窗外的鸟儿向朝天空飞去，教学楼实验室工位上的大学生敲着键盘，也在计算机领域里迈步前进。"}]}]},{"type":"element","tag":"h2","props":{"id":"写在题外"},"children":[{"type":"text","value":"写在题外"}]},{"type":"element","tag":"h3","props":{"id":"写这篇文章的动机"},"children":[{"type":"text","value":"写这篇文章的动机"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可能有人认为我写这篇文章有些过于苛责博客新手，但写此文是经过深刻考虑的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"M 在 2023 年 6 月用 GitHub Pages 搭建了博客，当时博客里只有一篇 Hello World 和一篇正文只有几个字母的文章。除了在同年 11 月提交了空文件并设置了域名之外，没有任何的内容更新。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而 2024 年 7 月我帮助 M 修复“新博客无法访问”至今，他的博客里也没有任何文章。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"我不愿让自己付出的努力落空为一个没有内容的博客网站"}]},{"type":"text","value":"，于是就写了这篇文章，希望能"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"把过程转化为可供参考的经验"}]},{"type":"text","value":"，帮助到真正愿意奉献到内容产出领域的人。"}]},{"type":"element","tag":"h3","props":{"id":"关于大学技术圈里刮起的博客之风"},"children":[{"type":"text","value":"关于大学技术圈里刮起的博客之风"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最近有不少同学先后搭建了属于自己的博客。"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"搭建博客是好事，分享内容是乐事，长期维护是难事。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"博客之魂在于内容。表面形式之亮丽固然悦目，但内容之实才得以赏心。"}]},{"type":"element","tag":"h3","props":{"id":"关于系统环境配置"},"children":[{"type":"text","value":"关于系统环境配置"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「少即是多」，配置环境前一定要审慎权衡。切莫引入非必要的配置，让问题更加复杂甚至扑朔迷离。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"「把所有软件装在 D 盘」「配置文件的超级堆砌」「永久关闭系统、软件更新」都是不建议的做法。电子设备服务于人类，而我们不应再为「伪教程」规训教化。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"就像对于「怎么充手机不伤电池」「空调多少度最省电」这些问题的态度一样，人应当顺从本心，不要为「如何配置」而配置。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上。"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":4,"depth":4,"links":[{"id":"问题与推论之间模糊的界限","depth":2,"text":"问题与推论之间模糊的界限","children":[{"id":"在吗起手","depth":3,"text":"「在吗」起手"},{"id":"弄清问题","depth":3,"text":"弄清问题"},{"id":"清理环境","depth":3,"text":"清理环境"},{"id":"错误推论","depth":3,"text":"错误推论"}]},{"id":"表面问题与实际意图的距离","depth":2,"text":"表面问题与实际意图的距离","children":[{"id":"问题环境","depth":3,"text":"问题环境"},{"id":"真正需求","depth":3,"text":"真正需求"}]},{"id":"本地开发环境有些许-messy","depth":2,"text":"本地开发环境有些许 messy","children":[{"id":"博客本体","depth":3,"text":"博客本体"},{"id":"npm-环境","depth":3,"text":"npm 环境"},{"id":"环境蓄力中","depth":3,"text":"环境蓄力中"}]},{"id":"从服务器修到电脑本体","depth":2,"text":"从服务器修到电脑本体","children":[{"id":"中文用户文件夹名","depth":3,"text":"中文用户文件夹名"},{"id":"切换账户依然占用","depth":3,"text":"切换账户依然占用"},{"id":"盘符图标上的小锁","depth":3,"text":"盘符图标上的小锁"},{"id":"pe-启动","depth":3,"text":"PE 启动"},{"id":"分区栓","depth":3,"text":"分区「栓」"},{"id":"path-被分解","depth":3,"text":"PATH 被分解"}]},{"id":"为了丝滑部署博客也是煞费苦心","depth":2,"text":"为了丝滑部署博客也是煞费苦心","children":[{"id":"部署博客的核心要点","depth":3,"text":"部署博客的核心要点"},{"id":"git-submodule-的轻松实践","depth":3,"text":"Git submodule 的轻松实践"},{"id":"阻止推送","depth":3,"text":"阻止推送"},{"id":"选择静态部署服务","depth":3,"text":"选择静态部署服务"},{"id":"迁移-dns","depth":3,"text":"迁移 DNS"},{"id":"小炒菜","depth":3,"text":"小炒菜"},{"id":"git-三部曲","depth":3,"text":"Git 三部曲"}]},{"id":"写在题外","depth":2,"text":"写在题外","children":[{"id":"写这篇文章的动机","depth":3,"text":"写这篇文章的动机"},{"id":"关于大学技术圈里刮起的博客之风","depth":3,"text":"关于大学技术圈里刮起的博客之风"},{"id":"关于系统环境配置","depth":3,"text":"关于系统环境配置"}]}]}},"_type":"markdown","_id":"content:posts:2024:all-pits-stepped.md","_source":"content","_file":"posts/2024/all-pits-stepped.md","_stem":"posts/2024/all-pits-stepped","_extension":"md","_original_dir":"/posts"}