import{d as L,R as x,ak as j,ag as G,f as d,o as s,a as P,P as g,C as _,L as O,V as i,i as $,Q as f,u as e,ai as Q,af as R,X as A,n as u,a3 as W,a1 as B,_ as T,k as q,Z as X,aS as J,F as H,j as K,D as Z,U as z,aI as Y,W as ee,S as te,c as oe,G as ne,ay as V,az as E,aT as ae}from"./DZaJv5P4.js";import{g as S,a as F,b as N,i as se}from"./CKG6-1Ns.js";import{g as re}from"./wEtJwtfk.js";import{_ as ie}from"./B3IT0eYQ.js";import ce from"./B8Vk-ykJ.js";import{u as M}from"./BNYK7yRo.js";import{q as U}from"./BsraOKMq.js";import{_ as le}from"./DzdQk-za.js";import de from"./Ct0GQFTH.js";import"./CAnody70.js";import"./hbOoBq-x.js";import"./BeTV8J9S.js";import"./C_gm745W.js";const pe={class:"post-nav"},_e={class:"operations"},ue={key:0,class:"post-info"},me=["datetime"],fe=["datetime"],ge={key:2,class:"article-category"},he={class:"wordcount"},ye=L({inheritAttrs:!1,__name:"PostHeader",props:{_path:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{type:[Number,Boolean]},references:{},readingTime:{}},setup(k){var I;const n=k,c=x(),a=S(n.date),l=S(n.updated),o=(I=n.categories)==null?void 0:I[0],p=re(o),m=`【${c.title}】${n.title}

${n.description?`${n.description}

`:""}${new URL(n._path,c.url).href}`,{copy:b,copied:h}=j(m);return(t,y)=>{var w;const r=O,C=Q,v=A,D=G("tip");return s(),d("div",{class:B(["post-header",{"has-cover":t.image,"text-revert":t.cover_revert}])},[t.image?(s(),P(r,{key:0,class:"post-cover",src:t.image,alt:t.title},null,8,["src","alt"])):g("",!0),_("div",pe,[_("div",_e,[i(C,{icon:e(h)?"ph:check-bold":"ph:share-bold",onClick:y[0]||(y[0]=qe=>e(b)())},{default:$(()=>y[1]||(y[1]=[f(" 文字分享 ")])),_:1},8,["icon"])]),t.hideInfo?g("",!0):(s(),d("div",ue,[t.date?R((s(),d("time",{key:0,datetime:("getIsoDatetime"in t?t.getIsoDatetime:e(N))(t.date)},[i(v,{name:"ph:calendar-dots-bold"}),f(" "+u(e(a)),1)],8,me)),[[D,`创建于 ${("getLocaleDatetime"in t?t.getLocaleDatetime:e(F))(n.date)}`]]):g("",!0),("isTimeDiffSignificant"in t?t.isTimeDiffSignificant:e(se))(t.date,t.updated,.999)?R((s(),d("time",{key:1,datetime:("getIsoDatetime"in t?t.getIsoDatetime:e(N))(t.updated)},[i(v,{name:"ph:calendar-plus-bold"}),f(" "+u(e(l)),1)],8,fe)),[[D,`修改于 ${("getLocaleDatetime"in t?t.getLocaleDatetime:e(F))(n.updated)}`]]):g("",!0),e(o)?(s(),d("span",ge,[i(v,{name:e(p)},null,8,["name"]),f(" "+u(e(o)),1)])):g("",!0),_("span",he,[i(v,{name:"ph:paragraph-bold"}),f(" "+u(("formatNumber"in t?t.formatNumber:e(W))((w=t.readingTime)==null?void 0:w.words))+" 字 ",1)])]))]),_("h1",{class:B(["post-title",{"text-story text-center":t.type==="story"}])},u(t.title),3)],2)}}}),ve=T(ye,[["__scopeId","data-v-a643fc71"]]),be={class:"md-excerpt gradient-card"},$e=L({__name:"Excerpt",props:{excerpt:{}},setup(k){var o;const n=k,c=x(),a=q(n.excerpt),l=q("");return((o=c.content.excerpt)==null?void 0:o.animation)!==!1&&(a.value="",X(async()=>{var p;l.value=((p=c.content.excerpt)==null?void 0:p.caret)??"_";for(const m of n.excerpt)a.value+=m,await J(50);l.value=""})),(p,m)=>{const b=A;return s(),d("div",be,[i(b,{name:"ph:highlighter-bold"}),f(u(e(a))+u(e(l)),1)])}}}),ke=T($e,[["__scopeId","data-v-1ee9f7a1"]]),De={class:"post-footer"},Ie={key:0,class:"reference"},Ce={class:"content"},we={key:0},Pe={class:"license"},Le={class:"content"},Te=L({inheritAttrs:!1,__name:"PostFooter",props:{_path:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{type:[Number,Boolean]},references:{},readingTime:{}},setup(k){const n=x();return(c,a)=>{const l=ce;return s(),d("div",De,[c.references?(s(),d("section",Ie,[a[0]||(a[0]=_("div",{id:"references",class:"title"}," 参考链接 ",-1)),_("div",Ce,[_("ul",null,[(s(!0),d(H,null,K(c.references,(o,p)=>(s(),d("li",{key:p},[typeof o=="string"?(s(),d("p",we,u(o),1)):(s(),P(l,{key:1,href:o.link},{default:$(()=>[f(u((o==null?void 0:o.title)??o.link),1)]),_:2},1032,["href"]))]))),128))])])])):g("",!0),_("section",Pe,[a[3]||(a[3]=_("div",{class:"title"}," 许可协议 ",-1)),_("div",Le,[_("p",null,[a[1]||(a[1]=f(" 本文采用 ")),i(l,{href:e(n).copyright.url},{default:$(()=>[f(u(e(n).copyright.name),1)]),_:1},8,["href"]),a[2]||(a[2]=f(" 许可协议，转载请注明出处。 "))])])])])}}}),Be=T(Te,[["__scopeId","data-v-7f040ea6"]]),Se=["datetime"],Ne={key:0,class:"surround-post"},xe=L({__name:"PostSurround",async setup(k){let n,c;const a=Z(),{data:l}=([n,c]=z(()=>M(`surround-${a.path}`,()=>U().only(["_path","date","title","type"]).sort({date:1}).where({_original_dir:{$eq:"/posts"}}).findSurround(a.path))),n=await n,c(),n),[o=null,p=null]=l.value??[],[m,b]=Y();return(h,I)=>{const t=A,y=ee;return s(),d(H,null,[i(e(m),null,{default:$(({post:r,icon:C,fallbackIcon:v,fallbackText:D})=>[i(y,{to:r==null?void 0:r._path,class:"surround-link"},{default:$(()=>[i(t,{name:r?C:v},null,8,["name"]),_("div",null,[_("strong",{class:B(["title",{"text-story":(r==null?void 0:r.type)==="story"}])},u((r==null?void 0:r.title)||D),3),r?(s(),d("time",{key:0,datetime:("getIsoDatetime"in h?h.getIsoDatetime:e(N))(r.date)},u(("getPostDate"in h?h.getPostDate:e(S))(r.date)),9,Se)):g("",!0)])]),_:2},1032,["to"])]),_:1}),e(o)||e(p)?(s(),d("div",Ne,[i(e(b),{post:e(p),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),i(e(b),{post:e(o),class:"align-right",icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头"},null,8,["post"])])):g("",!0)],64)}}}),Ae=T(xe,[["__scopeId","data-v-46d40c31"]]),Re=L({__name:"[...slug]",async setup(k){let n,c;const a=Z(),l=te();l.setAside(["toc"]);const{data:o}=([n,c]=z(()=>M(a.path,()=>U(a.path).findOne(),"$vHqkxevve1")),n=await n,c(),n),p=oe(()=>{var m;return((m=o.value)==null?void 0:m.description)||""});return o.value?(ne({title:o.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:o.value.image},{name:"description",content:o.value.description}]}),l.setAside(o.value.aside)):(a.meta.title="404",l.setAside(["blog-log"])),(m,b)=>{const h=ve,I=ke,t=ie,y=ae,r=Be,C=Ae,v=le,D=de;return s(),P(D,{value:e(o)},{empty:$(()=>[i(y,{icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"})]),default:$(()=>{var w;return[i(h,V(E(e(o))),null,16),e(p)?(s(),P(I,{key:0,excerpt:e(p)},null,8,["excerpt"])):g("",!0),i(t,{class:B(["article",{"md-story":((w=e(o))==null?void 0:w.type)==="story"}]),value:e(o)??{},tag:"article"},null,8,["class","value"]),i(r,V(E(e(o))),null,16),i(C),(s(),P(v,{key:e(a).path}))]}),_:1},8,["value"])}}}),Xe=T(Re,[["__scopeId","data-v-4f044f14"]]);export{Xe as default};
