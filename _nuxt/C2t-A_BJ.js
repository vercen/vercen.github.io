import{k as C,aF as D,a8 as g,am as A,aG as F,aH as V,d as B,D as E,aI as P,U as S,c as q,f as T,o as p,V as b,C as m,i as z,F as k,j as I,a1 as N,u as h,a as w,P as H,n as R,X as $,_ as G}from"./t63I15iJ.js";import{u as O}from"./BfLqdTst.js";import{q as U}from"./kJ6j94WI.js";import"./C_gm745W.js";import"./BhNlkjnB.js";const j=({delay:o},e)=>{let t,s=!0;const a=(...c)=>{s?(clearTimeout(t),t=setTimeout(()=>{s&&e(...c),t=void 0},o)):e(...c)};return a.isPending=()=>t!==void 0,a.cancel=()=>{s=!1},a.flush=(...c)=>e(...c),a},M=({interval:o},e)=>{let t=!0,s;const a=(...c)=>{t&&(e(...c),t=!1,s=setTimeout(()=>{t=!0,s=void 0},o))};return a.isThrottled=()=>s!==void 0,a},W=o=>M({interval:20},o),X=o=>j({delay:20},o);function Y(o){const e=W(o),t=X(o);return()=>{e(),t()}}function J(o){const e=C(null),t=(f,r=[])=>(f.forEach(l=>{const u=document.getElementById(l.id);u&&r.push({id:l.id,offsetTop:u.offsetTop}),l.children&&t(l.children,r)}),r),s=D(()=>g(o),()=>t(g(o)).reverse()),a=()=>{const f=Number.parseFloat(getComputedStyle(document.documentElement).getPropertyValue("scroll-margin-top")),r=window.scrollY+(f||64),l=s.value.find(i=>i.offsetTop<=r);e.value=(l==null?void 0:l.id)||null;const u=document.querySelector("#z-aside"),n=document.querySelector(`#z-aside a[href="#${e.value}"]`);u==null||u.scroll({top:(n==null?void 0:n.offsetTop)||0})};A("scroll",Y(()=>a()),{passive:!0});const{height:c}=F(document==null?void 0:document.body);return V(c,s.trigger),{activeTocItem:e}}const K=["href","title"],L={class:"widget-title"},Q={href:"#main-content","aria-label":"返回开头"},Z={href:"#twikoo","aria-label":"评论区"},ee={class:"widget-body"},te={key:1,class:"no-toc"},oe=B({__name:"Toc",async setup(o){let e,t;const s=E(),[a,c]=P(),{data:f}=([e,t]=S(()=>O(s.path,()=>U(s.path).findOne(),"$GTbUemPlen")),e=await e,t(),e),r=q(()=>{var n,i;return(i=(n=f.value)==null?void 0:n.body)==null?void 0:i.toc}),{activeTocItem:l}=J(()=>{var n;return((n=r.value)==null?void 0:n.links)??[]});function u(n,i){var _;return n.id===i?!0:((_=n.children)==null?void 0:_.some(v=>u(v,i)))??!1}return(n,i)=>{var v;const _=$;return p(),T(k,null,[b(h(a),null,{default:z(({tocItem:x})=>[m("ol",null,[(p(!0),T(k,null,I(x,(d,y)=>(p(),T("li",{key:y,class:N({"has-active":u(d,h(l)),active:d.id===h(l)})},[m("a",{href:`#${d==null?void 0:d.id}`,title:d.text},R(d.text),9,K),d.children?(p(),w(h(c),{key:0,"toc-item":d.children},null,8,["toc-item"])):H("",!0)],2))),128))])]),_:1}),m("h3",L,[i[0]||(i[0]=m("span",{class:"title"},"文章目录",-1)),m("a",Q,[b(_,{name:"ph:arrow-circle-up-bold"})]),m("a",Z,[b(_,{name:"ph:chat-circle-text-bold"})])]),m("div",ee,[(v=h(r))!=null&&v.links?(p(),w(h(c),{key:0,"toc-item":h(r).links},null,8,["toc-item"])):(p(),T("p",te," 暂无目录信息 "))])],64)}}}),ie=G(oe,[["__scopeId","data-v-95620db1"]]);export{ie as default};
